!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=600)}({122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tinymceInit=function(){tinymce.init({menubar:!1,selector:"textarea",forced_root_block:!1,plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace visualblocks visualchars codesample fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste textcolor"],toolbar:["styleselect | bold italic codesample | link image | bullist numlist outdent indent | forecolor backcolor"],paste_as_text:!0,branding:!1,width:"calc(100% - 2px)",setup:function(e){e.on("change",function(){e.save()})}}),$(document).on("focusin",function(e){$(e.target).closest(".mce-window").length&&e.stopImmediatePropagation()})}},20:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=function(e){var t=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var r=n[o].trim();if(r.substring(0,e.length+1)==e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t},t.getUrlFormat=function(e,t){var n=e+"?";for(var o in t)n=n+o+"="+t[o]+"&";return n},t.imgLoad=function(e,t){var n=setInterval(function(){e.complete&&(t(e),clearInterval(n))},8)},t.hexToRgb=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,o){return t+t+n+n+o+o});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},t.formatOpenCoterieDocumentUrl=function(e,t){return"/coteries/"+t+"/documents/"+e.slug+"/"+e.title.replace(/\s/g,"-")},t.formatOpenDocumentUrl=function(e){return"/documents/"+e.slug+"/"+e.title.replace(/\s/g,"-")}},600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enablePostCommentButton=t.enableRefreshCommentButton=t.addCommentRelatedListener=void 0;var o=n(20),r=n(122);function i(){(0,r.tinymceInit)(),$("code").addClass("prettyprint"),PR.prettyPrint(),$(".likeCommentButton").on("click",function(){if(is_authenticated){var e=$(this),t=parseInt(e.next().text())+1;e.next().text(t.toString()),e.off("click"),e.css("color","#6495ED"),e.on("click",function(){layer.msg("already liked",{icon:6,time:800})}),$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,o.getCookie)("csrftoken"),operation:"like_comment",comment_id:e.attr("comment_id")}})}else layer.msg('<span style="color: #ECECEC">You need to <a href="/sign-in" style="color: #ECECEC; text-decoration: underline">log in</a> first</span>')}),$(".delete_comment_button").on("click",function(){if(is_authenticated){var e=layer.load(0,{shade:.18}),t=this.value;$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,o.getCookie)("csrftoken"),operation:"delete_comment",comment_id:t,document_id:$("button[name='document_id']").val()},success:function(n){!function(e){for(var t=$(".CommentBlock[comment_id='"+e+"']").toArray();t.length>0;){var n=$(t.shift()),o=n.attr("comment_id");t=t.concat($(".CommentBlock[reply_to_comment_id='"+o+"']").toArray()),n.remove()}}(t),layer.close(e)}})}}),$(".reply_comment_button").on("click",function(){$(this).parents("blockquote").find(".reply_comment_form").slideToggle({duration:180,start:function(){$(this).is(":hidden")||$(".reply_comment_form").not($(this)).slideUp(180)}})}),$(".post_comment_reply_button").on("click",function(){if(is_authenticated){var e=!this.classList.contains("anonymously_post_comment_reply_button"),t=$(this),n=layer.load(0,{shade:.18});$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,o.getCookie)("csrftoken"),operation:"comment",comment_content:t.parents("form").find("textarea[name='comment_content']").val(),document_id:$("button[name='document_id']").val(),reply_to_comment_id:t.val(),is_public:e},success:function(e){$("#comment_update_div").html(e),i(),layer.close(n)}})}else layer.msg('<span style="color: #ECECEC">You need to <a href="/sign-in" style="color: #ECECEC; text-decoration: underline">log in</a> first</span>')})}t.addCommentRelatedListener=i,t.enableRefreshCommentButton=function(){$("#refresh_comment_button").on("click",function(){$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,o.getCookie)("csrftoken"),operation:"refresh",document_id:$("button[name='document_id']").val()},success:function(e){$("#comment_update_div").html(e),i()}})})},t.enablePostCommentButton=function(){$(".post_comment_button").on("click",function(){if(is_authenticated){var e=!this.classList.contains("anonymously_post_comment_button"),t=layer.load(0,{shade:.18}),n=tinyMCE.activeEditor;$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,o.getCookie)("csrftoken"),operation:"comment",comment_content:$("textarea[name='comment_content']").val(),document_id:$("button[name='document_id']").val(),is_public:e},success:function(e){$("#comment_update_div").html(e),i(),n.setContent(""),layer.close(t)}})}else layer.msg('<span style="color: #ECECEC">You need to <a href="/sign-in" style="color: #ECECEC; text-decoration: underline">log in</a> first</span>')})}}});