!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=522)}({100:function(e,t,n){"use strict";function o(){tinymce.init({menubar:!1,selector:"textarea",forced_root_block:!1,plugins:["advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace visualblocks visualchars codesample fullscreen insertdatetime media nonbreaking","save table contextmenu directionality emoticons template paste textcolor"],toolbar:["styleselect | bold italic codesample | link image | bullist numlist outdent indent | forecolor backcolor"],paste_as_text:!0,branding:!1,width:"calc(100% - 2px)",setup:function(e){e.on("change",function(){e.save()})}}),$(document).on("focusin",function(e){$(e.target).closest(".mce-window").length&&e.stopImmediatePropagation()})}Object.defineProperty(t,"__esModule",{value:!0}),t.tinymceInit=o},16:function(e,t,n){"use strict";function o(e,t){var n=e+"?";for(var o in t)n=n+o+"="+t[o]+"&";return n}function i(e){var t=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var i=n[o].trim();if(i.substring(0,e.length+1)==e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}return t}function r(e,t){var n=setInterval(function(){e.complete&&(t(e),clearInterval(n))},8)}function a(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,o){return t+t+n+n+o+o});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function c(e,t){return"/coteries/"+t+"/documents/"+e.title.replace(/\s/g,"-")+"/"+e.pk}function l(e){return"/documents/"+e.title.replace(/\s/g,"-")+"/"+e.pk}Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=i,t.getUrlFormat=o,t.imgLoad=r,t.hexToRgb=a,t.formatOpenCoterieDocumentUrl=c,t.formatOpenDocumentUrl=l},522:function(e,t,n){"use strict";function o(e){for(var t=$(".CommentBlock[comment_id='"+e+"']").toArray();t.length>0;){var n=$(t.shift()),o=n.attr("comment_id");t=t.concat($(".CommentBlock[reply_to_comment_id='"+o+"']").toArray()),n.remove()}}function i(){(0,l.tinymceInit)(),$("code").addClass("prettyprint"),PR.prettyPrint(),$(".likeCommentButton").on("click",function(){if(is_authenticated){var e=$(this),t=parseInt(e.next().text())+1;e.next().text(t.toString()),e.off("click"),e.css("color","#6495ED"),e.on("click",function(){layer.msg("already liked",{icon:6,time:800})}),$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,c.getCookie)("csrftoken"),operation:"like_comment",comment_id:e.attr("comment_id")}})}else layer.msg('<span style="color: #ECECEC">You need to <a href="/sign-in" style="color: #ECECEC; text-decoration: underline">log in</a> first</span>')}),$(".delete_comment_button").on("click",function(){if(is_authenticated){var e=layer.load(0,{shade:.18}),t=this.value;$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,c.getCookie)("csrftoken"),operation:"delete_comment",comment_id:t,document_id:$("button[name='document_id']").val()},success:function(n){o(t),layer.close(e)}})}}),$(".reply_comment_button").on("click",function(){$(this).parents("blockquote").find(".reply_comment_form").slideToggle({duration:180,start:function(){$(this).is(":hidden")||$(".reply_comment_form").not($(this)).slideUp(180)}})}),$(".post_comment_reply_button").on("click",function(){if(is_authenticated){var e=$(this),t=layer.load(0,{shade:.18});$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,c.getCookie)("csrftoken"),operation:"comment",comment_content:e.prev("textarea[name='comment_content']").val(),document_id:$("button[name='document_id']").val(),reply_to_comment_id:e.val(),is_public:!0},success:function(e){$("#comment_update_div").html(e),i(),layer.close(t)}})}else layer.msg('<span style="color: #ECECEC">You need to <a href="/sign-in" style="color: #ECECEC; text-decoration: underline">log in</a> first</span>')})}function r(){$("#refresh_comment_button").on("click",function(){$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,c.getCookie)("csrftoken"),operation:"refresh",document_id:$("button[name='document_id']").val()},success:function(e){$("#comment_update_div").html(e),i()}})})}function a(){$(".post_comment_button").on("click",function(){if(is_authenticated){var e=!this.classList.contains("anonymously_post_comment_button"),t=layer.load(0,{shade:.18}),n=tinyMCE.activeEditor;$.ajax({type:"POST",url:"",data:{csrfmiddlewaretoken:(0,c.getCookie)("csrftoken"),operation:"comment",comment_content:$("textarea[name='comment_content']").val(),document_id:$("button[name='document_id']").val(),is_public:e},success:function(e){$("#comment_update_div").html(e),i(),n.setContent(""),layer.close(t)}})}else layer.msg('<span style="color: #ECECEC">You need to <a href="/sign-in" style="color: #ECECEC; text-decoration: underline">log in</a> first</span>')})}Object.defineProperty(t,"__esModule",{value:!0}),t.enablePostCommentButton=t.enableRefreshCommentButton=t.addCommentRelatedListener=void 0;var c=n(16),l=n(100);t.addCommentRelatedListener=i,t.enableRefreshCommentButton=r,t.enablePostCommentButton=a}});