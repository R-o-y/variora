{"version":3,"sources":["logo.svg","serviceWorker.js","actions/types.js","actions/index.js","components/bottom_tab_bar.jsx","components/nav_bar.jsx","components/explore.jsx","components/group_explore.jsx","utilities/helper.js","components/uploads.jsx","components/readlists.jsx","components/notifications.jsx","components/settings.jsx","components/main.jsx","App.js","components/create_coterie_form.jsx","components/create_readlist_form.jsx","components/edit_readlist_form.jsx","components/document_viewer/document_viewer_helper.js","components/document_viewer/annotation_thread.jsx","components/document_viewer/float_button.jsx","components/document_viewer/document_viewer.jsx","components/readlist.jsx","components/add_to_readlist.jsx","components/search.jsx","components/login/login.jsx","reducers/index.js","reducers/reducer_user.js","reducers/reducer_documents.js","reducers/reducer_coteries.js","reducers/reducer_readlists.js","reducers/reducer_explore.js","reducers/reducer_notifications.js","reducers/reducer_invitations.js","reducers/reducer_search.js","index.js"],"names":["module","exports","__webpack_require__","p","Boolean","window","location","hostname","match","USER_GET","DOCUMENT_GET_MY","COTERIE_GET_MY_DOCUMENTS","DOCUMENT_GET_EXPLORE","DOCUMENT_UPLOAD","DOCUMENT_RENAME","DOCUMENT_DELETE_SUCCESS","DOCUMENT_UNCOLLECT_SUCCESS","READLIST_GET_MY","READLIST_GET_EXPLORE","READLIST_GET","READLIST_CREATE","READLIST_EDIT","READLIST_DELETE_SUCCESS","READLIST_COLLECT_SUCCESS","READLIST_UNCOLLECT_SUCCESS","READLIST_REMOVE_DOCUMENT_SUCCESS","NOTIFICATION_GET_COMBINED","NOTIFICATION_READ","SEARCHRESULT_GET","SEARCH_ERROR","COTERIE_GET_MY","COTERIE_CREATE","COTERIE_UPDATE","COTERIE_UPDATE_SUCCESS","COTERIE_INVITE","COTERIE_DOCUMENT_UPLOAD","COTERIE_LEAVE","COTERIE_DELETE","INVITATION_GET","INVITATION_ACCEPT","INVITATION_DECLINE","FILE_UPLOAD_API_URL","COTERIE_DOCUMENT_UPLOAD_API_URL","INVITE_TO_COTERIE_API_URL","GET_INVITATION_API_URL","getUser","request","axios","get","type","payload","getMyDocuments","uploadDocument","data","method","headers","Content-Type","url","uploadCoterieDocument","renameDocument","deleteDocument","slug","dispatch","then","deleteDocumentSuccess","catch","error","uncollectDocument","uncollectDocumentSuccess","getMyReadlists","getReadlist","deleteReadlist","deleteReadlistSuccess","getExploreDocuments","getExploreReadlists","getCombinedNotifications","markNotificationAsRead","getMyCoteries","getMyCoteriesDocument","uuid","concat","getMyCoteriesReadlists","createReadlist","editReadlist","collectReadlist","collectReadlistSuccess","uncollectReadlist","uncollectReadlistSuccess","documentChangeReadlists","pk","console","log","removeFromReadlistSuccess","createCoterie","updateCoterie","updateCoterieSuccess","name","description","leaveCoterie","deleteCoterie","getSearchResults","term","response","getCoterieSearchResults","coterieUuid","inviteToCoterie","getInvitations","acceptInvitation","declineInvitation","BottomTabBar","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","selectedTab","path","split","pop","hidden","slices","slice","length","join","_this2","react_default","a","createElement","style","position","height","width","top","tab_bar_default","unselectedTintColor","tintColor","barTintColor","Item","icon","Explore_default","selectedIcon","title","key","selected","onPress","setState","history","push","getGroupPath","content","CloudUpload_default","ViewList_default","Notifications_default","NotificationsActive_default","Settings_default","React","Component","library","add","faUsers","faUserPlus","faUserFriends","Navbar","coterieModal","e","preventDefault","defineProperty","charCodeAt","currentTab","pathname","coteriePk","coterie","coteries","list_default","extra","members","align","onClick","modal_default","alert","text","color","goToGroup","onClose","Brief","_this3","hasAdministratedCoteries","_","isEmpty","user","administratedCoteries","hasJoinedCoteries","joinedCoteries","nav_bar_default","mode","boxShadow","zIndex","paddingRight","leftContent","Avatar_default","alt","src","portrait_url","rightContent","icon_default","marginRight","params","groupUuid","Badge_default","classes","badge","badgeContent","className","avatar","backgroundColor","getRandomColor","fontSize","charAt","PeopleOutline_default","showModal","popup","visible","animationType","overflow","maxHeight","renderHeader","map","renderCoterieItem","button_default","connect","actions","withStyles","theme","right","border","Explore","loading","_ref","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","next","t0","abrupt","stop","apply","arguments","fetchData","react_sticky_lib","_ref2","objectSpread","tabs_default","DefaultTabBar","documents","element","open_url","GridListTile_default","Grid_default","container","alignItems","image","GridListTileBar_default","fontWeight","subtitle","lib_default","date","upload_time","white_space_default","GridList_default","cellSpacing","cols","cellHeight","flexWrap","margin","readlists","_this4","create_time","thumb","multipleLine","owner","nickname","explore","renderDocumentsSubgrid","mostViewsDocuments","mostStarsDocuments","mostAnnotationsDocuments","renderReadlistsSublist","mostCollectorsReadlists","newestReadlists","tabs","initalPage","swipeable","_renderTabBar","renderReactSticky","justifyContent","renderExploreDocuments","renderExploreReadlists","components_nav_bar","CircularProgress_default","marginTop","size","thickness","renderStickyTab","GroupExplore","coteriedocument_set","uploader_name","reverse","textAlign","renderCoterieDocuments","renderCoterieReadlists","coterieName","getCookie","cookieValue","document","cookie","cookies","i","trim","substring","decodeURIComponent","copyToClipboard","temp","body","appendChild","value","select","execCommand","removeChild","MAX_DOCUMENT_UPLOAD_SIZE","Uploads","uploadedActionModal","collectedActionModal","selectedDocument","handleFiles","file","finput","files","undefined","is_superuser","toast_default","info","validateDocumentSize","FormData","append","uploading","coterie_pk","success","fail","prevProps","newGroupUuid","item","isUpload","coterieId","textOverflow","moment","format","AddBoxOutlined_default","click","list","_this5","items","itemId","renderListItem","renderAddDocument","_this6","_this7","renderUploadedList","orderBy","uploadedDocuments","docSlug","renderCollectedList","collectedDocuments","currDocument","_this8","prompt","renameUrl","_this9","protocol","host","Share_default","uncollectUrl","DeleteForever_default","_this10","renderRenameModal","Create_default","delete_url","_this11","renderUploadedActionModal","renderCollectedActionModal","ref","visibility","accept","onChange","Readlists","createdReadlistActionModal","collectedReadlistActionModal","selectedReadlist","isCreated","arrow","renderAddReadlist","renderReadlist","createdReadlists","readlistSlug","collectedReadlists","renderCreatedReadlists","renderCollectedReadlists","Notifications","action","timestamp","isSame","invitations","invitation","Mail_default","display","flexDirection","float","Done_default","marginBottom","coterie_name","accept_url","Clear_default","reject_url","invitee_nickname","invitation_message","notifications","notification","isAnnotationRelated","verb","image_url","formatNotificationTime","unread","mark_read_url","redirect_url","actor","getActionDescription","renderInvitationList","renderNotificationsList","Settings","handleChange","event","target","isFetching","memberModal","adminModal","inviteDialog","editDialog","emails","message","currentCoterie","new_name","new_desc","member","isAdmin","includes","wing_blank_default","card_default","Header","marginLeft","Edit_default","Body","renderMember","administrators","admin","Dialog_default","open","aria-labelledby","DialogTitle_default","id","DialogContent_default","DialogContentText_default","TextField_default","required","autoFocus","multiline","label","fullWidth","DialogActions_default","Button_default","handleFormSubmit","defaultValue","handleGroupEdit","renderGroupInfo","VpnKey_default","People_default","PersonAdd_default","ExitToApp_default","renderAdminModal","renderMemberModal","renderInviteDialog","renderEditDialog","Groups","Switch","Route","component","Main","App","bottom_tab_bar","main","CreateCoterieForm","coterie_description","_this$state","goBack","onLeftClick","input_item_default","clear","placeholder","textarea_item_default","rows","count","disabled","handleSubmit","CreateReadlistForm","readlist_name","readlist_description","EditReadlistForm","readlist","rename_url","change_desc_url","_React$createElement","handleDelete","range","end","Array","fill","idx","SmallChip","root","Chip","SmallButton","minWidth","Button","reduce_comment","comment","prefix","timeago","isAnnotation","annotator","author","replier","edit_time","post_time","numReplies","replies","AnnotationThread","commentMenuElement","commentMenuUuid","openContextMenu","isHead","currentTarget","selectedComment","selectedCommentIsReply","closeContextMenu","locateComment","scrollIntoView","behavior","replyAnnotation","setParentState","replyToAnnotationReplyId","replyToAnnotationReplyUuid","annotationOpen","annotationLinearLinkedListOpen","replyReply","likeAnnotation","post","likeSet","likeReply","editComment","editCommentOpen","editTextContent","shareComment","deleteComment","operation","idType","parseInt","page_index","pdfDocument","selectedAnnotation","annotations","annotationsByPage","reply","splice","annotation","Set","justify","Typography_default","variant","dangerouslySetInnerHTML","__html","KeyboardArrowDown_default","annotationArea","react_fontawesome_index_es","faLocationArrow","faReply","has","faThumbsUped","faThumbsUp","faEllipsisV","hasOwnProperty","MathJax","Hub","Queue","commentBlock","Menu_default","anchorEl","PaperProps","MENU_ITEM_HEIGHT","MenuItem_default","faPencilAlt","faLink","faTrashAlt","FlaoatingButton","context","clickCallback","_this$props","transitions","duration","enteringScreen","leavingScreen","Grow_default","in","show","fab","bottom","minHeight","spacing","unit","withTheme","faPaperPlane","faTimesCircle","RENDERING","ANNOTATION_WIDTH_THRESHOLD","ANNOTATION_HEIGHT_THRESHOLD","DocumentViewer","pdfDoc","taskList","finishList","rendering","clearnessLevel","currentPageIndex","annotationAreas","prevScroll","pageYOffset","annotationFirstTouch","numPages","currentScale","scaleFactor","sampleWidth","sampleHeight","newAnnotationInputOpen","showFloatButton","creatingAnnotationAtPageIndex","newAnnotationContent","newAnnotationReplyContent","dynamicRenderOnScroll","pageIndex","Math","ceil","viewerWrappper","scrollHeight","renderOrNot","index","pre","getElementById","pushNewPageRenderingTask","renderTaskList","handleScroll","thisScroll","status","taskObj","scale","self","assertThisInitialized","getPage","page","canvas","getContext","viewport","getViewport","renderContext","canvasContext","render","promise","shift","renderAnnotationAreas","isGroupDocument","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","configSizeAccordingToLastPageAndRenderTheFirstSeveralPages","pdf","lastPage","innerWidth","styleDrawer","annotationWrapper","parentElement","classList","contains","selectAnnotation","remove","rgba","background","borderColor","deselectAnnotation","lockScroll","targetTouches","changeToCommentMode","getElementsByTagName","addEventListener","passive","changeToViewMode","removeEventListener","postAnnotation","newAnnotationWidth","newAnnotationHeight","newAnnotationY","newAnnotationX","getComputedStyle","getPropertyValue","newAnnotation","cancelCurrentAnnotation","postAnnotationReply","cancelCurrentAnnotationReply","postEdit","cancelEdit","PDFJS","workerSrc","getDocument","getPositionRelativeToPageTopLeft","touch_absolute_x","touches","pageX","touch_absolute_y","pageY","offsetLeft","offsetTop","gestureOnRND","annotationBeingCreated","viewWrapper","ele","onTouchStart","_getPositionRelativeT","_getPositionRelativeT2","slicedToArray","bottom_right_relative_x","bottom_right_relative_y","originalAnnotationX","originalAnnotationY","onTouchMove","_getPositionRelativeT3","_getPositionRelativeT4","max","abs","min","rnd","updatePosition","x","y","onTouchEnd","draggable","react_rnd_lib","c","bounds","onDragStop","d","onResizeStop","direction","delta","toLowerCase","parseFloat","TapAndPinchable_default","moveThreshold","onTap","frame_color","width_percent","height_percent","left","left_percent","top_percent","annotation-id","annotation-uuid","activity_indicator_default","toast","animating","Drawer_default","anchor","annotation_thread","bind","styles","createMuiTheme","palette","primary","reopenAnnotationThread","annotationReplyText","editText","float_button","AddComment_default","DoneAll_default","Readlist","collected","onCollectIconClick","isOwner","Card_default","CardContent_default","CardHeader_default","paddingTop","IconButton_default","paddingLeft","CardActions_default","aria-label","Favorite_default","FavoriteBorder_default","onShareIconClick","renderReadlistCard","renderDocumentList","AddToReadlist","checked","addReadlists","filter","removeReadlists","currDocumentUuid","href","replace","documents_uuids","Checkbox_default","renderOwnedReadlists","Search","searchTerm","results","documentsPath","sortKey","jsx","users","email_address","sort","b","localeCompare","Toolbar_default","InputBase_default","renderSearchResultList","search","faFacebook","faGoogle","Login","isAuthenticated","username","password","token","errorMessage","clickLogin","facebookLogin","FB","login","JSON","stringify","authResponse","scope","handleMessageClose","reason","s","js","fjs","parentNode","insertBefore","loadFBSdk","fbAsyncInit","init","appId","xfbml","version","AppEvents","logPageView","fbLoginButtonLoading","auth2","gapi","load","client_id","cookiepolicy","attachClickHandler","googleUser","getAuthResponse","id_token","Logo","rootReducer","combineReducers","extend","coterieMyUploadedDocuments","addedUploadedDocuments","newUploadedDocuments","newCollectedDocuments","newCollected","joinedCoteriesAfterLeave","administratedCoteriesAfterDelete","created_readlists","collected_readlists","keyBy","myUploadedDocuments","uploadedDocument","renamedDocument","omit","new_coterie","updated_coterie","most_collectors_readlists","newest_readlists","notification_read","resultReadlists","resultDocuments","resultUsers","typography","useNextVariants","suppressDeprecationWarnings","store","createStore","reducers","compose","applyMiddleware","ReduxPromise","ReduxThunk","ReactDOM","es","BrowserRouter","document_viewer_document_viewer","renderDocumentViewer","renderGroupDocumentViewer","exact","Redirect","to","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.22ea009d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.1f3294f6.svg\";","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const USER_GET = 'user_get';\n\nexport const DOCUMENT_GET_MY = 'document_get_my';\nexport const COTERIE_GET_MY_DOCUMENTS = 'document_get_my_documents';\nexport const DOCUMENT_GET_EXPLORE = 'document_get_explore';\nexport const DOCUMENT_UPLOAD = 'document_upload';\nexport const DOCUMENT_RENAME = 'document_rename';\nexport const DOCUMENT_DELETE_SUCCESS = 'document_delete_success';\nexport const DOCUMENT_UNCOLLECT_SUCCESS = 'document_uncollect_success';\n\nexport const READLIST_GET_MY = 'readlist_get_my';\nexport const READLIST_GET_EXPLORE = 'readlist_get_explore';\nexport const READLIST_GET = 'readlist_get';\nexport const READLIST_CREATE = 'readlist_create';\nexport const READLIST_EDIT = 'readlist_edit';\nexport const READLIST_DELETE_SUCCESS = 'readlist_delete_success';\nexport const READLIST_COLLECT_SUCCESS = 'readlist_collect_success';\nexport const READLIST_UNCOLLECT_SUCCESS = 'readlist_uncollect_success';\nexport const READLIST_REMOVE_DOCUMENT_SUCCESS = 'readlist_remove_document_success';\n\nexport const NOTIFICATION_GET_COMBINED = 'notification_get_combined';\nexport const NOTIFICATION_READ = 'notification_read';\n\nexport const SEARCHRESULT_GET = 'search_result_get';\nexport const SEARCH_ERROR = 'search_error';\n\nexport const COTERIE_GET_MY = 'coterie_get_my';\nexport const COTERIE_CREATE = 'coterie_create';\nexport const COTERIE_UPDATE = 'coterie_update';\nexport const COTERIE_UPDATE_SUCCESS = 'coterie_update_success';\nexport const COTERIE_INVITE = 'coterie_invite';\nexport const COTERIE_DOCUMENT_UPLOAD = 'coterie_document_upload';\nexport const COTERIE_LEAVE = 'coterie_leave';\nexport const COTERIE_DELETE = 'coterie_delete';\n\nexport const INVITATION_GET = 'invitation_get';\nexport const INVITATION_ACCEPT = 'invitation_accept';\nexport const INVITATION_DECLINE = 'invitation_decline';\n","import axios from 'axios';\nimport {\n  USER_GET,\n  DOCUMENT_GET_MY,\n  READLIST_GET_MY,\n  DOCUMENT_GET_EXPLORE,\n  READLIST_GET_EXPLORE,\n  NOTIFICATION_GET_COMBINED,\n  NOTIFICATION_READ,\n  COTERIE_GET_MY,\n  COTERIE_GET_MY_DOCUMENTS,\n  COTERIE_CREATE,\n  COTERIE_UPDATE,\n  COTERIE_UPDATE_SUCCESS,\n  COTERIE_INVITE,\n  COTERIE_DOCUMENT_UPLOAD,\n  COTERIE_LEAVE,\n  COTERIE_DELETE,\n  SEARCHTERM_UPDATE,\n  SEARCHRESULT_GET,\n  SEARCH_ERROR,\n  READLIST_GET,\n  READLIST_CREATE,\n  READLIST_EDIT,\n  READLIST_DELETE_SUCCESS,\n  READLIST_COLLECT_SUCCESS,\n  READLIST_UNCOLLECT_SUCCESS,\n  READLIST_REMOVE_DOCUMENT_SUCCESS,\n  DOCUMENT_UPLOAD,\n  DOCUMENT_RENAME,\n  DOCUMENT_DELETE_SUCCESS,\n  DOCUMENT_UNCOLLECT_SUCCESS,\n  INVITATION_GET,\n  INVITATION_ACCEPT,\n  INVITATION_DECLINE\n} from './types';\n\n\nconst FILE_UPLOAD_API_URL = '/file_viewer/api/documents/upload';\nconst COTERIE_DOCUMENT_UPLOAD_API_URL = '/coterie/api/coteriedocuments/upload';\nconst INVITE_TO_COTERIE_API_URL = '/coterie/api/invite';\nconst GET_INVITATION_API_URL = '/coterie/api/invitations';\n\nexport function getUser() {\n  const url = '/api/user';\n  const request = axios.get(url);\n\n  return {type: USER_GET, payload: request};\n}\n\nexport function getMyDocuments() {\n  const url = '/file_viewer/api/documents';\n  const request = axios.get(url);\n\n  return {type: DOCUMENT_GET_MY, payload: request};\n}\n\nexport function uploadDocument(data) {\n  const request = axios({\n    method: 'post',\n    headers: {'Content-Type': 'multipart/form-data'},\n    url: FILE_UPLOAD_API_URL,\n    data\n  });\n\n  return {type: DOCUMENT_UPLOAD, payload: request};\n}\n\nexport function uploadCoterieDocument(data) {\n  const request = axios({\n    method: 'post',\n    headers: {'Content-Type': 'multipart/form-data'},\n    url: COTERIE_DOCUMENT_UPLOAD_API_URL,\n    data\n  });\n\n  return {type: COTERIE_DOCUMENT_UPLOAD, payload: request};\n}\n\nexport function renameDocument(url, data) {\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  });\n\n  return {type: DOCUMENT_RENAME, payload: request};\n}\n\nexport function deleteDocument(url, data, slug) {\n  return function(dispatch) {\n    return axios({\n      method: 'post',\n      url,\n      data\n    })\n    .then(() => {\n      dispatch(deleteDocumentSuccess(slug));\n      return;\n    }).catch(error => {\n      throw(error);\n    })\n  }\n}\n\nexport function deleteDocumentSuccess(slug) {\n  return {type: DOCUMENT_DELETE_SUCCESS, payload: slug}\n}\n\nexport function uncollectDocument(url, data, slug) {\n  return function(dispatch) {\n    return axios({\n      method: 'post',\n      url,\n      data\n    })\n    .then(() => {\n      dispatch(uncollectDocumentSuccess(slug));\n      return;\n    }).catch(error => {\n      throw(error);\n    })\n  }\n}\n\nexport function uncollectDocumentSuccess(slug) {\n  return {type: DOCUMENT_UNCOLLECT_SUCCESS, payload: slug}\n}\n\n\nexport function getMyReadlists() {\n  const url = '/file_viewer/api/readlists';\n  const request = axios.get(url);\n\n  return {type: READLIST_GET_MY, payload: request};\n}\n\nexport function getReadlist(slug) {\n  const url = '/file_viewer/api/readlists/' + slug;\n  const request = axios.get(url);\n\n  return {type: READLIST_GET, payload: request};\n}\n\nexport function deleteReadlist(url, data, slug) {\n  return function(dispatch) {\n    return axios({\n      method: 'post',\n      url,\n      data\n    })\n    .then(() => {\n      dispatch(deleteDocumentSuccess(slug));\n      return;\n    }).catch(error => {\n      throw(error);\n    })\n  }\n}\n\nexport function deleteReadlistSuccess(slug) {\n  return {type: READLIST_DELETE_SUCCESS, payload: slug}\n}\n\n\nexport function getExploreDocuments() {\n  const url = '/file_viewer/api/documents/explore';\n  const request = axios.get(url);\n\n  return {type: DOCUMENT_GET_EXPLORE, payload: request};\n}\n\nexport function getExploreReadlists() {\n  const url = '/file_viewer/api/readlists/explore';\n  const request = axios.get(url);\n\n  return {type: READLIST_GET_EXPLORE, payload: request};\n}\n\nexport function getCombinedNotifications() {\n  const url = '/notifications/api/combined';\n  const request = axios.get(url);\n\n  return {type: NOTIFICATION_GET_COMBINED, payload: request};\n}\n\nexport function markNotificationAsRead(url, slug) {\n  const request = axios.get(url);\n\n  return {\n    type: NOTIFICATION_READ,\n    payload: request,\n    slug\n  }\n}\n\nexport function getMyCoteries() {\n  const url = '/coterie/api/coteries';\n  const request = axios.get(url);\n\n  return {type: COTERIE_GET_MY, payload: request};\n}\n\nexport function getMyCoteriesDocument(uuid) {\n  const url = `/coteries/api/coteries/${uuid}/members/me/uploaded-documents`;\n  const request = axios.get(url);\n\n  return {type: COTERIE_GET_MY_DOCUMENTS, payload: request};\n}\n\nexport function getMyCoteriesReadlists(uuid) {\n  // const url = `/coteries/api/coteries/${uuid}/members/me/uploaded-documents`;\n  // const request = axios.get(url);\n\n  // return {type: COTERIE_GET_MY_DOCUMENTS, payload: request};\n}\n\nexport function createReadlist(data) {\n  const url = '/file_viewer/api/readlists/create';\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  });\n  return {type: READLIST_CREATE, payload: request};\n}\n\nexport function editReadlist(url, data) {\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  });\n\n  return {type: READLIST_EDIT, payload: request};\n}\n\nexport function collectReadlist(data, slug) {\n  const url = \"/file_viewer/api/readlists/\" + slug + \"/collect\";\n  return function(dispatch) {\n    return axios({\n      method: 'post',\n      url,\n      data\n    })\n    .then(() => {\n      dispatch(collectReadlistSuccess(slug));\n      return;\n    }).catch(error => {\n      throw(error);\n    })\n  }\n}\n\nexport function collectReadlistSuccess(slug) {\n  return {type: READLIST_COLLECT_SUCCESS, payload: slug}\n}\n\nexport function uncollectReadlist(data, slug) {\n  const url = \"/file_viewer/api/readlists/\" + slug + \"/uncollect\";\n  return function(dispatch) {\n    return axios({\n      method: 'post',\n      url,\n      data\n    })\n    .then(() => {\n      dispatch(uncollectReadlistSuccess(slug));\n      return;\n    }).catch(error => {\n      throw(error);\n    })\n  }\n}\n\nexport function uncollectReadlistSuccess(slug) {\n  return {type: READLIST_UNCOLLECT_SUCCESS, payload: slug}\n}\n\n\nexport function documentChangeReadlists(pk, data) {\n  const url = '/file_viewer/api/documents/' + pk + '/changereadlists'\n  console.log(\"making req to \" + url + \" with data\")\n  console.log(data)\n  return function(dispatch) {\n    return axios({\n      method: 'post',\n      url,\n      data\n    })\n    .then(() => {\n      dispatch(removeFromReadlistSuccess());\n      return;\n    }).catch(error => {\n      throw(error);\n    })\n  }\n}\n\nexport function removeFromReadlistSuccess() {\n  return {type: READLIST_REMOVE_DOCUMENT_SUCCESS, payload: {}}\n}\n\nexport function createCoterie(data) {\n  const url = '/coterie/api/coteries/create';\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  });\n\n  return {type: COTERIE_CREATE, payload: request};\n}\n\nexport function updateCoterie(data, pk) {\n  const url = `/coterie/api/coteries/${pk}/update`\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  });\n\n  return {type: COTERIE_UPDATE, payload: request};\n}\n\nexport function updateCoterieSuccess(uuid, name, description) {\n  return {\n    type: COTERIE_UPDATE_SUCCESS,\n    payload: {\n      uuid,\n      name,\n      description\n    }\n  }\n}\n\nexport function leaveCoterie(data, pk, uuid) {\n  const url = `/coterie/api/coteries/${pk}/exit`\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  });\n\n  return {type: COTERIE_LEAVE, payload: request, uuid};\n}\n\nexport function deleteCoterie(data, pk, uuid) {\n  const url = `/coterie/api/coteries/${pk}/delete`\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  });\n\n  return {type: COTERIE_DELETE, payload: request, uuid};\n}\n\nexport function getSearchResults(term) {\n  const url = '/api/search?key=' + term;\n  return function(dispatch) {\n    axios.get(url)\n    .then((response) => {\n      dispatch({type: SEARCHRESULT_GET, payload: response})\n    })\n    .catch((error) => {\n      dispatch({type: SEARCH_ERROR})\n    })\n  }\n}\n\nexport function getCoterieSearchResults(term, coterieUuid) {\n  const url = '/coterie/api/coteries/' + coterieUuid + '/search?key=' + term;\n  return function(dispatch) {\n    axios.get(url)\n    .then((response) => {\n      dispatch({type: SEARCHRESULT_GET, payload: response})\n    })\n    .catch((error) => {\n      dispatch({type: SEARCH_ERROR})\n    })\n  }\n}\n\nexport function inviteToCoterie(data) {\n  const request = axios({\n    method: 'post',\n    url: INVITE_TO_COTERIE_API_URL,\n    data\n  });\n\n  return {type: COTERIE_INVITE, payload: request};\n}\n\nexport function getInvitations() {\n  const request = axios.get(GET_INVITATION_API_URL);\n\n  return {type: INVITATION_GET, payload: request};\n}\n\nexport function acceptInvitation(url, data, pk) {\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  })\n\n  return { type: INVITATION_ACCEPT, payload: request, pk }\n}\n\nexport function declineInvitation(url, data, pk) {\n  const request = axios({\n    method: 'post',\n    url,\n    data\n  })\n\n  return { type: INVITATION_DECLINE, payload: request, pk }\n}\n","import React from 'react';\nimport { TabBar } from 'antd-mobile';\nimport ExploreIcon from '@material-ui/icons/Explore';\nimport UploadIcon from '@material-ui/icons/CloudUpload';\nimport ReadlistIcon from '@material-ui/icons/ViewList';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nclass BottomTabBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedTab: this.props.path.split('/').pop(),\n      hidden: false\n    };\n  }\n\n  getGroupPath() {\n    const path = this.props.path\n    const slices = path.split('/').slice(1)\n    if (slices.length >= 1 && slices[0] === 'groups')\n      return path.split('/').slice(0, -1).join('/')\n    return ''\n  }\n\n  render() {\n    return (\n      <div style={{ position: 'fixed', height: '100%', width: '100%', top: 0 }}>\n        <TabBar\n          unselectedTintColor=\"#949494\"\n          tintColor=\"#1BA39C\"\n          barTintColor=\"white\"\n          hidden={this.state.hidden}\n        >\n          <TabBar.Item\n            icon={<ExploreIcon />}\n            selectedIcon={<ExploreIcon />}\n            title={this.state.selectedTab === 'explore' ? 'explore' : ''}\n            key=\"explore\"\n            selected={this.state.selectedTab === 'explore'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'explore',\n              });\n              this.props.history.push(`${this.getGroupPath()}/explore`);\n            }}\n          >\n            {this.state.selectedTab === 'explore' && this.props.content}\n          </TabBar.Item>\n          <TabBar.Item\n            icon={<UploadIcon />}\n            selectedIcon={<UploadIcon />}\n            title={this.state.selectedTab === 'uploads' ? 'uploads' : ''}\n            key=\"Uploads\"\n            selected={this.state.selectedTab === 'uploads'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'uploads',\n              });\n              this.props.history.push(`${this.getGroupPath()}/uploads`);\n            }}\n          >\n            {this.state.selectedTab === 'uploads' && this.props.content}\n          </TabBar.Item>\n          <TabBar.Item\n            icon={<ReadlistIcon />}\n            selectedIcon={<ReadlistIcon />}\n            title={this.state.selectedTab === 'readlists' ? 'readlists' : ''}\n            key=\"Readlists\"\n            selected={this.state.selectedTab === 'readlists'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'readlists',\n              });\n              this.props.history.push(`${this.getGroupPath()}/readlists`);\n            }}\n          >\n            {this.state.selectedTab === 'readlists' && this.props.content}\n          </TabBar.Item>\n          <TabBar.Item\n            icon={<NotificationsIcon />}\n            selectedIcon={<NotificationsActiveIcon />}\n            title={this.state.selectedTab === 'notifications' ? 'notifications' : ''}\n            key=\"Notifications\"\n            selected={this.state.selectedTab === 'notifications'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'notifications',\n              });\n              this.props.history.push(`${this.getGroupPath()}/notifications`);\n            }}\n          >\n            {this.state.selectedTab === 'notifications' && this.props.content}\n          </TabBar.Item>\n          <TabBar.Item\n            icon={<SettingsIcon />}\n            selectedIcon={<SettingsIcon />}\n            title={this.state.selectedTab === 'settings' ? 'settings' : ''}\n            key=\"Settings\"\n            selected={this.state.selectedTab === 'settings'}\n            onPress={() => {\n              this.setState({\n                selectedTab: 'settings',\n              });\n              this.props.history.push(`${this.getGroupPath()}/settings`);\n            }}\n          >\n            {this.state.selectedTab === 'settings' && this.props.content}\n          </TabBar.Item>\n        </TabBar>\n      </div>\n    );\n  }\n}\n\nexport default BottomTabBar;\n","import * as actions from '../actions';\n\nimport { Button, List, Modal, NavBar, Icon } from 'antd-mobile';\nimport React, { Component } from 'react';\nimport {\n  faUserFriends,\n  faUserPlus,\n  faUsers,\n} from '@fortawesome/free-solid-svg-icons'\nimport { withStyles } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport PeopleOutlineIcon from '@material-ui/icons/PeopleOutline';\nimport SupervisedUserCircleIcon from '@material-ui/icons/SupervisedUserCircle';\nimport Badge from '@material-ui/core/Badge';\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\nimport { library } from '@fortawesome/fontawesome-svg-core'\nlibrary.add(faUsers, faUserPlus, faUserFriends)\n\n\nclass Navbar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      coterieModal: false\n    };\n  }\n\n  showModal(key, e) {\n    e.preventDefault();\n    this.setState({\n      [key]: true,\n    });\n  }\n\n  onClose(key) {\n    this.setState({\n      [key]: false,\n    });\n  }\n\n  getRandomColor(uuid){\n    const colors = ['#1BA39C', '#1abc9c', '#2ecc71', '#3498db', '#9b59b6', '#34495e', '#f1c40f', '#e67e22', '#e74c3c'];\n    return colors[uuid.charCodeAt(0)%8];\n  }\n\n  goToGroup(uuid) {\n    let currentTab = this.props.history.location.pathname.split('/').pop();\n    this.props.history.push(`/groups/${uuid}/${currentTab}`);\n  }\n\n  renderCoterieItem(coteriePk) {\n    let coterie = this.props.coteries[coteriePk];\n    return (\n      <List.Item\n        key={coterie.pk}\n        extra={coterie.members.length + \" members\"}\n        align=\"top\"\n        onClick={() =>\n          Modal.alert('Switch to group ' + coterie.name + '?', '', [\n            { text: 'Cancel' },\n            { text: 'OK', style:{color:'#1BA39C'},\n              onPress: () => {\n              this.goToGroup(coterie.uuid);\n              this.onClose('coterieModal');\n            }},\n          ])\n        }\n      >\n        {coterie.name}\n        <List.Item.Brief>{coterie.description}</List.Item.Brief>\n      </List.Item>\n    );\n  }\n\n  render() {\n    const hasAdministratedCoteries = !_.isEmpty(this.props.user.administratedCoteries);\n    const hasJoinedCoteries = !_.isEmpty(this.props.user.joinedCoteries);\n    console.log(this.props)\n\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          style={{\n            boxShadow: '0px 1px 3px rgba(28, 28, 28, .1)',\n            zIndex: 10000000,\n            position: 'relative',\n            paddingRight: 8,\n          }}\n          leftContent={\n            <Avatar\n              alt=\"avatar\"\n              style={{width: 28, height: 28}}\n              src={this.props.user.portrait_url}\n              onClick={(e) => {console.log(\"User avatar clicked\")}}\n            />\n          }\n          rightContent={[\n            <Icon\n              key=\"0\"\n              type=\"search\"\n              style={{ marginRight: '16px' }}\n              onClick={(e) => {this.props.match.params.groupUuid ? this.props.history.push('/search/' + this.props.match.params.groupUuid) : this.props.history.push('/search')}}\n            />,\n            <div key = \"1\">\n            {\n              this.props.match.params.groupUuid\n              ?\n              <Badge\n                color=\"primary\"\n                classes={{ badge: this.props.classes.badge }}\n                badgeContent={\n                  <Avatar className={this.props.classes.avatar}\n                    style={{backgroundColor: this.getRandomColor(this.props.match.params.groupUuid)}}>\n                    <span style={{fontSize: '80%'}}>\n                        {this.props.coteries[this.props.match.params.groupUuid]['name'].charAt(0)}\n                    </span>\n                  </Avatar>}\n              >\n                <PeopleOutlineIcon\n                  style={{color: \"rgb(101, 119, 134)\", height: 25, width: 25}}\n                  onClick={(e) => {\n                    this.props.getMyCoteries();\n                    this.showModal('coterieModal', e);\n                  }}\n                />\n              </Badge>\n              :\n              <PeopleOutlineIcon\n                style={{color: \"rgb(101, 119, 134)\", height: 25, width: 25}}\n                onClick={(e) => {\n                  this.props.getMyCoteries();\n                  this.showModal('coterieModal', e);\n                }}\n              />\n            }\n\n            <Modal\n              popup\n              visible={this.state.coterieModal}\n              onClose={() => this.onClose('coterieModal')}\n              animationType=\"slide-up\"\n              style={{overflow: 'auto', maxHeight: '80vh'}}\n            >\n              <List\n                renderHeader={() =>\n                  <b style={{color: \"#1BA39C\"}}>SWITCH GROUP</b>\n                }\n                className=\"popup-list\"\n              >\n                <List.Item\n                  onClick={() => {\n                    let currentTab = this.props.history.location.pathname.split('/').pop();\n                    Modal.alert('Switch to public?', 'This is where everyone is in.', [\n                      { text: 'Cancel' },\n                      { text: 'OK', style: {color: '#1BA39C'},\n                        onPress: () => {\n                        this.props.history.push(`/${currentTab}`);\n                        this.onClose('coterieModal');\n                      }},\n                    ])\n                  }}\n                >\n                  Public\n                </List.Item>\n                { !hasJoinedCoteries && !hasAdministratedCoteries &&\n                  <div>You have not joined any groups.</div>\n                }\n                { hasAdministratedCoteries &&\n                  <List\n                    renderHeader={() =>\n                      <b>Administrated</b>\n                    }\n                  >\n                    {this.props.user.administratedCoteries.map((coteriePk) => {\n                      return this.renderCoterieItem(coteriePk);\n                    })}\n                  </List>\n                }\n                { hasJoinedCoteries &&\n                  <List\n                    renderHeader={() =>\n                      <b>Joined</b>\n                    }\n                  >\n                    {this.props.user.joinedCoteries.map((coteriePk) => {\n                      return this.renderCoterieItem(coteriePk);\n                    })}\n                  </List>\n                }\n                <List.Item>\n                  <Button\n                    type=\"primary\"\n                    style={{backgroundColor: \"#1BA39C\"}}\n                    onClick={() => {\n                      this.onClose('coterieModal');\n                      this.props.history.push(\"/create-coterie-form\");\n                    }}\n                  >Create a new group</Button>\n                </List.Item>\n              </List>\n            </Modal>\n          </div>\n          ]\n          }\n        >\n          {this.props.title}\n        </NavBar>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    coteries: state.coteries\n  };\n}\n\nconst styles = theme => ({\n  badge: {\n    top: 6,\n    right: -16,\n    border: `1px solid white`,\n  },\n  avatar: {\n    width: '100%',\n    height: '100%',\n  },\n});\nexport default connect(mapStateToProps, actions)(withStyles(styles)(Navbar));\n","import './theme.css'\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport Navbar from './nav_bar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TimeAgo from 'react-timeago';\nimport Grid from '@material-ui/core/Grid';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\n\nimport { Tabs, WhiteSpace, List } from 'antd-mobile';\nimport { StickyContainer, Sticky } from 'react-sticky';\n\nclass Explore extends Component {\n  state = { loading: true }\n\n  componentDidMount() {\n    const fetchData = async () => {\n      try {\n        await this.props.getExploreDocuments();\n        await this.props.getExploreReadlists();    \n      } catch (error) {\n        console.error(error);\n        return;\n      }\n      this.setState({loading: false})\n    }\n    fetchData();\n  }\n\n  renderReactSticky(props) {\n    return (\n      <Sticky>\n        {({ style }) =>\n          <div style={{  ...style, zIndex: 1 }}>\n            <Tabs.DefaultTabBar {...props} />\n          </div>\n        }\n      </Sticky>\n    )\n  }\n\n  renderDocumentsSubgrid(documents, title) {\n    if (!documents.length) {\n      return (<div></div>)\n    }\n    const data = documents.map((element) => {\n      return (\n        <div key={element.open_url}>\n          <GridListTile className={'grid-tile'} key={element.open_url} onClick={() => {this.props.history.push(`${element.open_url}`)}}>\n              <Grid container alignItems=\"center\" style={{height: '100%'}}>\n                <img src={element.image} alt={element.title}/>\n              </Grid>\n              <GridListTileBar\n                style={{height: '25%'}}\n                title={<div style={{fontSize: '0.8rem', fontWeight: 'bold'}}>{element.title}</div>}\n                subtitle={<div style={{fontSize: '0.7rem'}}>{<TimeAgo date={element.upload_time} />}</div>}\n              />\n          </GridListTile>\n        </div>\n      )\n    });\n\n    return (\n      <div>\n        <WhiteSpace />\n        <div style={{color: '#888', fontSize: '14px'}}>{title}</div>\n        <WhiteSpace />\n\n        <GridList cellSpacing={0} cols={1} cellHeight={'auto'} style={{flexWrap: 'nowrap', margin: 0}}>\n          {data}\n        </GridList>\n\n      </div>\n    )\n  }\n\n  renderReadlistsSublist(readlists, title) {\n    if (!readlists.length) {\n      return (<div></div>)\n    }\n    const data = readlists.map(element => {\n      return (\n        <List.Item\n          key={element.slug}\n          extra={<TimeAgo date={element.create_time} />}\n          thumb=\"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678072-folder-document-512.png\"\n          multipleLine\n          onClick={() => {this.props.history.push(`${element.url}`)}}\n        >\n          {element.name}\n          <List.Item.Brief>{element.owner.nickname}</List.Item.Brief>\n        </List.Item>\n      )\n    })\n    return (\n      <div>\n        <List renderHeader={() => title}>\n          {data}\n        </List>\n      </div>\n    )\n  }\n\n  renderExploreDocuments() {\n    const documents = this.props.explore.documents;\n    return (\n      <div>\n        {this.renderDocumentsSubgrid(documents.mostViewsDocuments, \"Most Views\")}\n        {this.renderDocumentsSubgrid(documents.mostStarsDocuments, \"Most Stars\")}\n        {this.renderDocumentsSubgrid(documents.mostAnnotationsDocuments, \"Most Annotations\")}\n      </div>\n    )\n  }\n\n  renderExploreReadlists() {\n    const readlists = this.props.explore.readlists;\n    return (\n      <div>\n        {this.renderReadlistsSublist(readlists.mostCollectorsReadlists, \"Trending Lists\")}\n        {this.renderReadlistsSublist(readlists.newestReadlists, \"Recent Lists\")}\n      </div>\n    )\n  }\n\n  renderStickyTab() {\n    return (\n      <div>\n        <WhiteSpace />\n        <StickyContainer>\n          <Tabs\n            tabs={[{ title: \"Documents\"}, { title: \"Readlists\"}]}\n            initalPage={'t2'}\n            swipeable={false}\n            _renderTabBar={this.renderReactSticky}\n          >\n            <div style={{ justifyContent: 'center', height: '100%'}}>\n              {this.renderExploreDocuments()}\n            </div>\n            <div style={{ justifyContent: 'center', height: '100%'}}>\n              {this.renderExploreReadlists()}\n            </div>\n          </Tabs>\n        </StickyContainer>\n        <WhiteSpace />\n      </div>\n    )\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div>\n          <Navbar title=\"Explore\" history={this.props.history} match={this.props.match}/>\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <Navbar title=\"Explore\" history={this.props.history} match={this.props.match}/>\n        {this.renderStickyTab()}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    explore: state.explore\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Explore);\n","import './theme.css'\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport Navbar from './nav_bar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport TimeAgo from 'react-timeago';\nimport Grid from '@material-ui/core/Grid';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\n\nimport { Tabs, WhiteSpace, List } from 'antd-mobile';\nimport { StickyContainer, Sticky } from 'react-sticky';\n\nclass GroupExplore extends Component {\n  state = { loading: true }\n\n  componentDidMount() {\n    this.props.getMyCoteries().then(() => {\n      this.setState({ loading: false });\n    });\n  }\n\n  renderReactSticky(props) {\n    return (\n      <Sticky>\n        {({ style }) =>\n          <div style={{  ...style, zIndex: 1 }}>\n            <Tabs.DefaultTabBar {...props} />\n          </div>\n        }\n      </Sticky>\n    )\n  }\n\n  renderCoterieDocuments() {\n    const coterieDocs = this.props.coteries[this.props.match.params.groupUuid].coteriedocument_set;\n    const data = coterieDocs.map(element => {\n      return (\n        <List.Item\n          key={element.slug}\n          extra={<TimeAgo date={element.upload_time} />}\n          thumb=\"https://cdn1.iconfinder.com/data/icons/file-types-23/48/PDF-128.png\"\n          multipleLine\n          onClick={() => {this.props.history.push(`/group-documents/${element.slug}`)}}\n        >\n          {element.title}\n          <List.Item.Brief>{element.uploader_name}</List.Item.Brief>\n        </List.Item>\n      )\n    }).reverse()\n    return (\n      <List>\n        {data}\n      </List>\n    )\n  }\n\n  renderCoterieReadlists() {\n    // ======= TODO: Implement coterie readlists  ==========\n    return (\n      <List>\n        <List.Item>\n          <div style={{color: 'grey', textAlign:'center' }}>\n            Group-based readlists still in development.\n          </div>\n        </List.Item>\n      </List>\n    )\n    // ======================================================\n  }\n\n  renderStickyTab() {\n    return (\n      <div>\n        <WhiteSpace />\n        <StickyContainer>\n          <Tabs\n            tabs={[{ title: \"Documents\"}, { title: \"Readlists\"}]}\n            initalPage={'t2'}\n            swipeable={false}\n            _renderTabBar={this.renderReactSticky}\n          >\n            <div style={{ justifyContent: 'center', height: '100%'}}>\n              {this.renderCoterieDocuments()}\n            </div>\n            <div style={{ justifyContent: 'center', height: '100%'}}>\n              {this.renderCoterieReadlists()}\n            </div>\n          </Tabs>\n        </StickyContainer>\n        <WhiteSpace />\n      </div>\n    )\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div>\n          <Navbar title=\"\" history={this.props.history} match={this.props.match}/>\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      );\n    }\n    const coterieName= this.props.coteries[this.props.match.params.groupUuid].name;\n    return (\n      <div>\n        <Navbar title={coterieName} history={this.props.history} match={this.props.match}/>\n        {this.renderStickyTab()}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    explore: state.explore,\n    coteries: state.coteries\n  };\n}\n\nexport default connect(mapStateToProps, actions)(GroupExplore);\n","import { Toast } from 'antd-mobile';\n\nexport function getCookie(name) {\n  var cookieValue = null\n  if (document.cookie && document.cookie !== '') {\n    var cookies = document.cookie.split(';')\n    for (var i = 0; i < cookies.length; i++) {\n      var cookie = cookies[i].trim()\n      // Does this cookie string begin with the name we want?\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1))\n        break\n      }\n    }\n  }\n  return cookieValue\n}\n\nexport function copyToClipboard(content) {\n  const temp = document.createElement('input')\n  temp.style.hidden = true\n  document.body.appendChild(temp)\n  temp.value = content\n  temp.select()\n  document.execCommand('copy')\n  document.body.removeChild(temp)\n}\n\nconst MAX_DOCUMENT_UPLOAD_SIZE = 5 * 1024 * 1024;\n\nexport function validateDocumentSize(file) {\n  if (file.size > MAX_DOCUMENT_UPLOAD_SIZE) {\n    Toast.info('Document size should be less than 5 MB', 1);\n    return false\n  }\n  return true\n}\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Navbar from './nav_bar';\nimport moment from 'moment';\nimport Avatar from '@material-ui/core/Avatar';\nimport AddIcon from '@material-ui/icons/AddBoxOutlined';\nimport CreateIcon from '@material-ui/icons/Create';\nimport ShareIcon from '@material-ui/icons/Share';\nimport DeleteIcon from '@material-ui/icons/DeleteForever';\nimport { Button, Icon, List, Modal, Tabs, Toast, WhiteSpace } from 'antd-mobile';\nimport { StickyContainer, Sticky } from 'react-sticky';\nimport { getCookie, copyToClipboard, validateDocumentSize } from '../utilities/helper';\n\nclass Uploads extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadedActionModal: false,\n      collectedActionModal: false,\n      selectedDocument: null,\n      loading: true\n    };\n\n    this.handleFiles = () => {\n      const file = this.finput.files[0]\n      // console.log(file)\n\n      const user = this.props.user;\n      if ((user === undefined || !user.is_superuser) && !validateDocumentSize(file))\n        return false\n\n      var data = new FormData()\n      // REPLACE WITH USER INPUT NAME\n      data.append('title', file.name)\n      data.append('file_upload', file)\n      data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n      this.setState({ uploading: true })\n      Toast.loading('Loading...')\n\n      if (!this.props.match.params.groupUuid) {\n        this.props.uploadDocument(data).then(() => {\n          Toast.success('Upload success!', 1);\n          this.setState({ uploading: false })\n        }).catch((error) => {\n          Toast.fail('Upload failed!', 1);\n        })\n      } else {\n        const coterie_pk = this.props.coteries[this.props.match.params.groupUuid].pk;\n        data.append('coterie_pk', coterie_pk);\n        this.props.uploadCoterieDocument(data).then(() => {\n          Toast.success('Upload success!', 1);\n          this.setState({ uploading: false })\n        }).catch((error) => {\n          Toast.fail('Upload failed!', 1);\n        })\n      }\n\n      this.finput.value = ''\n    }\n  }\n\n  componentDidMount() {\n    let groupUuid = this.props.match.params.groupUuid;\n    if (groupUuid) {\n      this.props.getMyCoteriesDocument(groupUuid).then(() => {\n        this.setState({loading: false})\n      })\n    } else {\n      this.props.getMyDocuments().then(() => {\n        this.setState({loading: false})\n      })\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    let newGroupUuid = this.props.match.params.groupUuid;\n    if (newGroupUuid !== prevProps.match.params.groupUuid) {\n      if (newGroupUuid) {\n        this.props.getMyCoteriesDocument(newGroupUuid);\n      } else {\n        this.props.getMyDocuments();\n      }\n    }\n  }\n\n  showModal(key, e) {\n    e.preventDefault();\n    this.setState({\n      [key]: true,\n    });\n  }\n\n  onClose(key) {\n    this.setState({\n      [key]: false,\n    });\n  }\n\n  renderReactSticky(props) {\n    return (\n      <Sticky>\n        {({ style }) =>\n          <div style={{ ...style, zIndex: 1 }}>\n            <Tabs.DefaultTabBar {...props} />\n          </div>\n        }\n      </Sticky>\n    )\n  }\n\n  renderListItem(item, isUpload) {\n    return (\n      <div key={item.slug}>\n        <List.Item\n          thumb={<img src='https://cdn1.iconfinder.com/data/icons/file-types-23/48/PDF-128.png' alt='pdf-icon' style={{height: 28, width: 28}} />}\n          multipleLine\n          onClick={() => {\n            const groupUuid = this.props.match.params.groupUuid\n            if (groupUuid) {\n              const coterie = this.props.coteries[groupUuid]\n              const coterieId = coterie.pk\n              this.props.history.push(`/coteries/${coterieId}/documents/${item.slug}`)\n            } else\n              this.props.history.push(`/documents/${item.slug}`)\n          }}\n        >\n          <div style={{width: '88%', overflow: 'hidden', textOverflow: 'ellipsis'}}>\n            {item.title}\n          </div>\n          <List.Item.Brief>{moment(item.upload_time).format(\"MMMM Do YYYY, h:mm a\")}</List.Item.Brief>\n        </List.Item>\n        <Icon type=\"ellipsis\"\n          style={{position: 'absolute', width:'10%', marginTop: -50, right: 5, color:'#a8a8a8', zIndex: 1}}\n          onClick={(e) => {\n            this.setState({selectedDocument: item.slug})\n            this.showModal(isUpload ? 'uploadedActionModal' : 'collectedActionModal', e);\n          }}/>\n      </div>\n    )\n  }\n\n  renderAddDocument() {\n    return (\n      <List.Item\n        thumb={<AddIcon style={{color:'grey'}} />}\n        onClick={() => this.finput.click()}\n      >\n        <div style={{color:'grey'}}>New document</div>\n        <List.Item.Brief>Click to upload...</List.Item.Brief>\n      </List.Item>\n    )\n  }\n\n  renderUploadedList(list) {\n    const items = list.map((itemId) => {\n      return this.renderListItem(this.props.documents[itemId], true)\n    })\n    return (\n      <List>\n        {this.renderAddDocument()}\n        {items}\n      </List>\n    )\n  }\n\n  renderCollectedList(list) {\n    if (!list.length) {\n      return (\n        <List>\n          <List.Item>\n            <div style={{color: 'grey', textAlign:'center' }}>\n              You haven't collected any document.\n            </div>\n          </List.Item>\n        </List>\n      )\n    }\n    const items = list.map((itemId) => {\n      return this.renderListItem(this.props.documents[itemId], false)\n    })\n    return (\n      <List>\n        {items}\n      </List>\n    )\n  }\n\n  renderStickyTab() {\n    return (\n      <div>\n        <WhiteSpace />\n        <StickyContainer>\n          <Tabs\n            tabs={[{ title: \"Uploaded\"}, { title: \"Collected\"}]}\n            initalPage={'t2'}\n            swipeable={false}\n            _renderTabBar={this.renderReactSticky}\n          >\n            <div style={{ justifyContent: 'center', height: '100%', backgroundColor: '#fff' }}>\n              {this.renderUploadedList(_.orderBy(this.props.user.uploadedDocuments, (docSlug) => {return this.props.documents[docSlug].upload_time}, 'desc'))}\n            </div>\n            <div style={{ justifyContent: 'center', height: '100%', backgroundColor: '#fff' }}>\n              {this.renderCollectedList(_.orderBy(this.props.user.collectedDocuments, (docSlug) => {return this.props.documents[docSlug].upload_time}, 'desc'))}\n            </div>\n          </Tabs>\n        </StickyContainer>\n        <WhiteSpace />\n      </div>\n    )\n  }\n\n  renderRenameModal(currDocument) {\n    return (\n      Modal.prompt('Rename', 'Enter the new name', [\n      { text: 'Cancel' },\n      { text: 'Confirm', onPress: value => {\n        let data = new FormData();\n        data.append('new_title', value);\n        data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n        this.props.renameDocument(currDocument.renameUrl, data);\n      }},\n    ], 'default', currDocument.title)\n    )\n  }\n\n  renderCollectedActionModal() {\n    let currDocument = this.props.documents[this.state.selectedDocument];\n\n    return (\n      <Modal\n        popup\n        visible={this.state.collectedActionModal}\n        onClose={() => this.onClose('collectedActionModal')}\n        animationType=\"slide-up\"\n      >\n        <List\n          renderHeader={() =>\n            <b style={{ color: \"#1BA39C\"}}>{currDocument.title}</b>\n          }\n          className=\"popup-list\"\n        >\n          <List.Item\n            onClick={() => {\n              this.props.history.push('/add-to-readlists')\n            }}>\n            <AddIcon style={{height: 18, color:'#1BA39C',marginRight: 20}}/>\n            Add To Readlist\n          </List.Item>\n          {\n            this.props.match.params.groupUuid ? null :\n            <List.Item\n              onClick={() => {\n                const location = window.location;\n                const url = [location.protocol, '//', location.host, '/documents/', currDocument.slug].join('');\n                copyToClipboard(url);\n                Toast.success('Copied to clipboard!', 1);}}\n            >\n              <ShareIcon style={{height: 18, color:'#1BA39C',marginRight: 20}}/>\n              Share\n            </List.Item>\n          }\n          <List.Item\n            onClick={() => {\n              Modal.alert('Uncollect ' + currDocument.title + '?', '', [\n                { text: 'Cancel' },\n                { text: 'Uncollect', style:{color:'#FF0000'},\n                  onPress: () => {\n                    this.onClose('collectedActionModal');\n                    let data = new FormData();\n                    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n                    this.props.uncollectDocument(currDocument.uncollectUrl, data, currDocument.slug);\n                }},\n              ])\n            }}\n          >\n            <DeleteIcon style={{height: 18, color:'#e74c3c',marginRight: 20}}/>\n            <span style={{color:'#e74c3c'}}>Uncollect</span>\n          </List.Item>\n        </List>\n      </Modal>\n    )\n  }\n\n  renderUploadedActionModal() {\n    let currDocument = this.props.documents[this.state.selectedDocument];\n    return (\n      <Modal\n        popup\n        visible={this.state.uploadedActionModal}\n        onClose={() => this.onClose('uploadedActionModal')}\n        animationType=\"slide-up\"\n      >\n        <List\n          renderHeader={() =>\n            <b style={{ color: \"#1BA39C\"}}>{currDocument.title}</b>\n          }\n          className=\"popup-list\"\n        >\n          <List.Item\n            onClick={() => {\n              this.props.history.push('/add-to-readlists/' + currDocument.slug)\n            }}>\n            <AddIcon style={{height: 18, color:'#1BA39C',marginRight: 20}}/>\n            Add To Readlist\n          </List.Item>\n          {\n            this.props.match.params.groupUuid ? null :\n            <List.Item\n              onClick={() => {\n                const location = window.location;\n                const url = [location.protocol, '//', location.host, '/documents/', currDocument.slug].join('');\n                copyToClipboard(url);\n                Toast.success('Copied to clipboard!', 1);}}\n            >\n              <ShareIcon style={{height: 18, color:'#1BA39C',marginRight: 20}}/>\n              Share\n            </List.Item>\n          }\n          <List.Item\n            onClick={() => {this.renderRenameModal(currDocument)}}\n          >\n            <CreateIcon style={{height: 18, color:'#1BA39C',marginRight: 20}}/>\n            Rename\n          </List.Item>\n          <List.Item\n            onClick={() => {\n              Modal.alert('Delete ' + currDocument.title + '?', '', [\n                { text: 'Cancel' },\n                { text: 'Delete', style:{color:'#FF0000'},\n                  onPress: () => {\n                    this.onClose('uploadedActionModal');\n                    let data = new FormData();\n                    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n                    this.props.deleteDocument(currDocument.delete_url, data, currDocument.slug);\n                }},\n              ])\n            }}\n          >\n            <DeleteIcon style={{height: 18, color:'#e74c3c',marginRight: 20}}/>\n            <span style={{color:'#e74c3c'}}>Delete</span>\n          </List.Item>\n        </List>\n      </Modal>\n    )\n  }\n\n  render() {\n    console.log(this.props.documents);\n\n    if (this.state.loading) {\n      return (\n        <div>\n          <Navbar title=\"Uploads\" history={this.props.history} match={this.props.match} />\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      )\n    }\n\n    return (\n      <div>\n        <Navbar title=\"Uploads\" history={this.props.history} match={this.props.match} />\n        {this.renderStickyTab()}\n        {this.renderUploadedActionModal()}\n        {this.renderCollectedActionModal()}\n        <input\n          ref={item => this.finput = item}\n          style={{ visibility: 'hidden' }}\n          type={'file'}\n          accept=\"application/pdf\"\n          onChange={async () => this.handleFiles()}>\n        </input>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    documents: state.documents,\n    coteries: state.coteries,\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Uploads);\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Navbar from './nav_bar';\nimport moment from 'moment';\nimport AddIcon from '@material-ui/icons/AddBoxOutlined';\nimport ShareIcon from '@material-ui/icons/Share';\nimport DeleteIcon from '@material-ui/icons/DeleteForever';\n\nimport { Tabs, WhiteSpace, List, Modal, Toast, Icon } from 'antd-mobile';\nimport { StickyContainer, Sticky } from 'react-sticky';\nimport { getCookie, copyToClipboard } from '../utilities/helper';\n\nclass Readlists extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      createdReadlistActionModal: false,\n      collectedReadlistActionModal: false,\n      selectedReadlist: null,\n      loading: true\n    };\n  }\n\n  componentDidMount() {\n    let groupUuid = this.props.match.params.groupUuid;\n    if (groupUuid) {\n      // this.props.getMyCoteriesReadlists(groupUuid).then(() => {\n        this.setState({loading: false})\n      // })\n    } else {\n      this.props.getMyReadlists().then(() => {\n        this.setState({loading: false})\n      })\n    }\n  }\n\n  renderReactSticky(props) {\n    return (\n      <Sticky>\n        {({ style }) =>\n          <div style={{ ...style, zIndex: 1 }}>\n            <Tabs.DefaultTabBar {...props} />\n          </div>\n        }\n      </Sticky>\n    )\n  }\n\n  renderAddReadlist() {\n    // ================ TODO: TEMP CODE UNTIL GROUP-BASED READLISTS ========================\n    let groupUuid = this.props.match.params.groupUuid;\n    if (groupUuid) {\n      return (\n        <div></div>\n      )\n    }\n    // =====================================================================================\n    return (\n      <List.Item\n        thumb={<AddIcon style={{color:'grey'}} />}\n        onClick={() => {this.props.history.push(\"/create-readlist-form\")}}\n      >\n        <div style={{color:'grey'}}>New readlist</div>\n        <List.Item.Brief>Click to create...</List.Item.Brief>\n      </List.Item>\n    )\n  }\n\n  renderReadlist(list, isCreated) {\n    // ================ TODO: TEMP CODE UNTIL GROUP-BASED READLISTS ========================\n    let groupUuid = this.props.match.params.groupUuid;\n    if (groupUuid) {\n      return (\n        <List>\n          <List.Item>\n            <div style={{color: 'grey', textAlign:'center' }}>\n              Group-based readlists still in development.\n            </div>\n          </List.Item>\n        </List>\n      )\n    }\n    // =====================================================================================\n\n    if (!list.length) {\n      return (\n        <List>\n          <List.Item>\n            <div style={{color: 'grey', textAlign:'center' }}>\n              You haven't created any readlists.\n            </div>\n          </List.Item>\n        </List>\n      )\n    }\n    const data = list.map(slug => {\n      let element = this.props.readlists[slug];\n      return (\n        <div key={slug}>\n          <List.Item\n            thumb=\"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678072-folder-document-512.png\"\n            multipleLine\n            arrow=\"horizontal\"\n            onClick={() => {this.props.history.push(`readlists/${slug}`)}}\n          >\n            {element.name}\n            <List.Item.Brief>{moment(element.create_time).format(\"MMMM Do YYYY, h:mm a\")}</List.Item.Brief>\n          </List.Item>\n        </div>\n      )\n    })\n    return (\n      <div>\n        <List>\n          {data}\n        </List>\n      </div>\n    )\n  }\n\n  renderCreatedReadlists() {\n    return (\n      <div>\n        {this.renderAddReadlist()}\n        {this.renderReadlist(_.orderBy(this.props.user.createdReadlists, (readlistSlug) => {return this.props.readlists[readlistSlug].create_time}, 'desc'), true)}\n      </div>\n    )\n  }\n\n  renderCollectedReadlists() {\n    return (\n      <div>\n        {this.renderReadlist(_.orderBy(this.props.user.collectedReadlists, (readlistSlug) => {return this.props.readlists[readlistSlug].create_time}, 'desc'), false)}\n      </div>\n    )\n  }\n\n  renderStickyTab() {\n    return (\n      <div>\n        <WhiteSpace />\n        <StickyContainer>\n          <Tabs\n            tabs={[{ title: \"Created\"}, { title: \"Collected\"}]}\n            initalPage={'t2'}\n            _renderTabBar={this.renderReactSticky}\n          >\n            <div style={{ justifyContent: 'center', height: '100%', backgroundColor: '#fff' }}>\n              {this.renderCreatedReadlists()}\n            </div>\n            <div style={{ justifyContent: 'center', height: '100%', backgroundColor: '#fff' }}>\n              {this.renderCollectedReadlists()}\n            </div>\n          </Tabs>\n        </StickyContainer>\n        <WhiteSpace />\n      </div>\n    )\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div>\n          <Navbar title=\"Readlists\" history={this.props.history} match={this.props.match}/>\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <Navbar title=\"Readlists\" history={this.props.history} match={this.props.match}/>\n        {this.renderStickyTab()}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    readlists: state.readlists\n  };\n}\n\n\nexport default connect(mapStateToProps, actions)(Readlists);\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport { Badge, List, WhiteSpace, Modal } from 'antd-mobile';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Navbar from './nav_bar';\nimport moment from 'moment';\nimport Avatar from '@material-ui/core/Avatar';\nimport MailIcon from '@material-ui/icons/Mail';\nimport DoneIcon from '@material-ui/icons/Done';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { getCookie } from '../utilities/helper';\n\nclass Notifications extends Component {\n  state = { loading: true }\n\n  componentDidMount() {\n    this.props.getCombinedNotifications().then(() => {\n      this.props.getInvitations().then(() => {\n        this.setState({ loading: false })\n      })\n    })\n  }\n\n  getActionDescription(action) {\n    if (action === 'reply to annotation') {\n      return 'replied'\n    }\n    else if (action === 'post annotation') {\n      return 'posted'\n    }\n    return action;\n  }\n\n  formatNotificationTime(timestamp) {\n    if (moment(timestamp).isSame(moment(), 'day')) {\n      return moment(timestamp).format('H:mm');\n    }\n    else if (moment(timestamp).isSame(moment(), 'year')) {\n      return moment(timestamp).format('M-d')\n    }\n    else {\n      return moment(timestamp).format('YYYY-M-d')\n    }\n  }\n\n  renderInvitationList(invitations) {\n    const items = invitations.map((invitation) => {\n      return (\n        <List.Item\n          key={invitation.pk}\n          thumb={<Avatar style={{height:50, width:50, backgroundColor:'#1BA39C'}}><MailIcon style={{height:40}}/></Avatar>}\n          extra={\n            <div style={{  display: 'flex', justifyContent: 'center', flexDirection: 'column', float:'right'}}>\n              <DoneIcon style={{marginBottom: 20, color: '1BA39C'}}\n                onClick={() => {\n                  Modal.alert('Accept', 'Accept invitation to join ' + invitation.coterie_name + '?', [\n                    { text: 'Cancel' },\n                    { text: 'Join', style: {color: '#1BA39C'},\n                      onPress: () => {\n                        let data = new FormData();\n                        data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n                        this.props.acceptInvitation(invitation.accept_url, data, invitation.pk);\n                    }},\n                  ])\n                }}\n              />\n              <ClearIcon style={{color: 'red'}}\n                onClick={() => {\n                  Modal.alert('Decline', 'Decline invitation to join ' + invitation.coterie_name + '?', [\n                    { text: 'Cancel' },\n                    { text: 'Decline', style: {color: '#FF0000'},\n                      onPress: () => {\n                        let data = new FormData();\n                        data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n                        this.props.declineInvitation(invitation.reject_url, data, invitation.pk);\n                    }},\n                  ])\n                }} />\n            </div>\n          }\n          align='middle'\n          multipleLine\n          wrap\n          style={{backgroundColor: '#edf9f6'}}\n          onClick={() => {}}\n        >\n          <b>{invitation.invitee_nickname + \" invited you to join \" + invitation.coterie_name}</b>\n          <List.Item.Brief>\n            { invitation.invitation_message }\n          </List.Item.Brief>\n        </List.Item>\n      )\n    })\n\n    return (\n      <div>\n        <WhiteSpace />\n          <List renderHeader={() => 'Pending invitaions'}\n            style={{textAlign: 'left'}}\n          >\n            {items}\n          </List>\n        <WhiteSpace />\n      </div>\n    )\n  }\n\n  renderNotificationsList(notifications) {\n    const items = notifications.map((notification) => {\n      let isAnnotationRelated = ( notification.verb ==='reply to annotation' || notification.verb === 'post annotation')\n      return (\n        <List.Item\n          key={notification.slug}\n          thumb={(isAnnotationRelated && notification.data) ?\n            <img src={notification.data.image_url} style={{height:50, width:50}} /> :\n            <Avatar style={{height:50, width:50, backgroundColor:'#1BA39C'}}><MailIcon style={{height:40}}/></Avatar>}\n          extra={this.formatNotificationTime(notification.timestamp)}\n          align=\"top\"\n          multipleLine\n          style={{backgroundColor: notification.unread ? '#edf9f6' : ''}}\n          onClick={() => {\n            this.props.markNotificationAsRead(notification.mark_read_url, notification.slug)\n            if (isAnnotationRelated && notification.data) {\n              this.props.history.push(notification.data.redirect_url)\n            }\n          }}\n        >\n          { notification.unread ?\n            <b>{notification.actor + \" \" + this.getActionDescription(notification.verb) }</b> :\n            notification.actor + \" \" + this.getActionDescription(notification.verb)\n          }\n          <List.Item.Brief>\n            { notification.description }\n          </List.Item.Brief>\n        </List.Item>\n      )\n    })\n\n    return (\n      <div>\n        <WhiteSpace />\n          <List>\n            {items}\n          </List>\n        <WhiteSpace />\n      </div>\n    )\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div>\n          <Navbar title=\"Notifications\" history={this.props.history} match={this.props.match}/>\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      );\n    }\n\n    if (_.isEmpty(this.props.notifications) && _.isEmpty(this.props.invitations)) {\n      return (\n        <div>\n          <Navbar title=\"Notifications\" history={this.props.history} match={this.props.match}/>\n          <List>\n            <List.Item>\n              <List.Item.Brief>\n                You are up to date!\n              </List.Item.Brief>\n            </List.Item>\n          </List>\n        </div>\n      )\n    }\n\n    const notifications = _.orderBy(this.props.notifications, 'timestamp', 'desc');\n    const invitations = _.orderBy(this.props.invitations, 'pk', 'desc');\n\n    console.log(this.props);\n    return (\n      <div>\n        <Navbar title=\"Notifications\" history={this.props.history} match={this.props.match}/>\n        { invitations.length !== 0 && this.renderInvitationList(invitations) }\n        { this.renderNotificationsList(notifications) }\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    notifications: state.notifications,\n    invitations: state.invitations,\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Notifications);\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport Navbar from './nav_bar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { List, WingBlank, WhiteSpace, Card, Modal } from 'antd-mobile';\nimport PeopleOutlineIcon from '@material-ui/icons/PeopleOutline';\nimport EditIcon from '@material-ui/icons/Edit';\nimport PeopleIcon from '@material-ui/icons/People';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport ExitIcon from '@material-ui/icons/ExitToApp';\nimport KeyIcon from '@material-ui/icons/VpnKey';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport { getCookie } from '../utilities/helper';\n\n\nclass Settings extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isFetching: true,\n      memberModal: false,\n      adminModal: false,\n      inviteDialog: false,\n      editDialog: false\n    }\n  }\n\n  componentDidMount() {\n    this.props.getMyCoteries().then(() => {\n      this.setState({isFetching: false})\n    })\n  }\n\n  showModal(key, e) {\n    e.preventDefault();\n    this.setState({\n      [key]: true,\n    });\n  }\n\n  onClose(key) {\n    this.setState({\n      [key]: false,\n    });\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  handleFormSubmit() {\n    var data = new FormData();\n    data.append('coterie_id', this.props.coteries[this.props.match.params.groupUuid].pk);\n    data.append('invitee_emails', this.state.emails);\n    data.append('invitation_message', this.state.message);\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n    this.props.inviteToCoterie(data);\n  }\n\n  handleGroupEdit() {\n    let currentCoterie = this.props.coteries[this.props.match.params.groupUuid];\n\n    let data = new FormData();\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n\n    if (this.state.new_name && (this.state.new_name !== currentCoterie.name)) {\n      data.append('new_name', this.state.new_name);\n    }\n    if (this.state.new_desc && (this.state.new_desc !== currentCoterie.description)) {\n      data.append('new_desc', this.state.new_desc);\n    }\n    this.props.updateCoterie(data, currentCoterie.pk).then((response) => {\n      this.props.updateCoterieSuccess(currentCoterie.uuid, this.state.new_name, this.state.new_desc)\n    })\n  }\n\n  renderMember(member) {\n    return (\n      <List.Item\n        key={member.pk}\n        thumb={member.portrait_url}\n      >\n        {member.nickname}\n      </List.Item>\n    )\n  }\n\n  renderGroupInfo(currentCoterie) {\n    let isAdmin = this.props.user.administratedCoteries.includes(currentCoterie.uuid);\n    return (\n      <WingBlank size=\"lg\">\n        <WhiteSpace size=\"lg\" />\n        <Card>\n          <Card.Header\n            title={<span style={{marginLeft:20}}>{currentCoterie.name}</span>}\n            thumb={<PeopleOutlineIcon style={{color: 'rgb(101, 119, 134)'}} />}\n            extra={ isAdmin &&\n              <EditIcon onClick={(e) => {this.showModal('editDialog', e)}} />\n            }\n          />\n          <Card.Body>\n            <div>{currentCoterie.description}</div>\n          </Card.Body>\n        </Card>\n        <WhiteSpace size=\"lg\" />\n      </WingBlank>\n    )\n  }\n\n  renderMemberModal(currentCoterie) {\n    return (\n      <Modal\n        popup\n        visible={this.state.memberModal}\n        onClose={() => this.onClose('memberModal')}\n        animationType=\"slide-up\"\n        style={{overflow: 'auto', maxHeight: '80vh'}}\n      >\n        <List\n          renderHeader={() =>\n            <b style={{color: \"#1BA39C\"}}>Members</b>\n          }\n          className=\"popup-list\"\n        >\n          {currentCoterie.members.map((member) => {\n            return this.renderMember(member);\n          })}\n        </List>\n      </Modal>\n    )\n  }\n\n  renderAdminModal(currentCoterie) {\n    return (\n      <Modal\n        popup\n        visible={this.state.adminModal}\n        onClose={() => this.onClose('adminModal')}\n        animationType=\"slide-up\"\n        style={{overflow: 'auto', maxHeight: '80vh'}}\n      >\n        <List\n          renderHeader={() =>\n            <b style={{color: \"#1BA39C\"}}>Administrators</b>\n          }\n          className=\"popup-list\"\n        >\n          {currentCoterie.administrators.map((admin) => {\n            return this.renderMember(admin);\n          })}\n        </List>\n      </Modal>\n    )\n  }\n\n  renderInviteDialog() {\n    return (\n      <div>\n        <Dialog\n          open={this.state.inviteDialog}\n          onClose={() => this.onClose('inviteDialog')}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Invite new members</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              To invite new member to the group, enter the email addresses here separated by commas. We will send invitation messages.\n            </DialogContentText>\n            <TextField\n              required\n              autoFocus\n              multiline\n              margin=\"dense\"\n              id=\"emails\"\n              label=\"Email Address\"\n              type=\"email\"\n              fullWidth\n              onChange={this.handleChange('emails')}\n            />\n            <TextField\n              required\n              multiline\n              margin=\"dense\"\n              id=\"message\"\n              label=\"Message\"\n              fullWidth\n              onChange={this.handleChange('message')}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => this.onClose('inviteDialog')} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={() => {this.onClose('inviteDialog'); this.handleFormSubmit();}} color=\"primary\">\n              Send\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    )\n  }\n\n  renderEditDialog() {\n    let currentCoterie = this.props.coteries[this.props.match.params.groupUuid];\n\n    return (\n      <div>\n        <Dialog\n          open={this.state.editDialog}\n          onClose={() => this.onClose('editDialog')}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Edit Group Info</DialogTitle>\n          <DialogContent>\n            <TextField\n              autoFocus\n              multiline\n              margin=\"dense\"\n              id=\"new_name\"\n              label=\"New name\"\n              defaultValue={currentCoterie.name}\n              fullWidth\n              onChange={this.handleChange('new_name')}\n            />\n            <TextField\n              multiline\n              margin=\"dense\"\n              id=\"new_desc\"\n              label=\"New description\"\n              defaultValue={currentCoterie.description}\n              fullWidth\n              onChange={this.handleChange('new_desc')}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => this.onClose('editDialog')} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={() => {this.onClose('editDialog'); this.handleGroupEdit();}} color=\"primary\">\n              Send\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    )\n  }\n\n  render() {\n    if (_.isEmpty(this.props.user) || this.state.isFetching) {\n      return (\n        <div>\n          <Navbar title=\"Settings\" history={this.props.history} match={this.props.match} />\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      );\n    }\n\n    if (!this.props.match.params.groupUuid) {\n      return (\n        <div>\n          <Navbar title=\"Settings\" history={this.props.history} match={this.props.match} />\n          <h2> You are in the public group. </h2>\n        </div>\n      )\n    }\n\n    const currentCoterie = this.props.coteries[this.props.match.params.groupUuid];\n    let isAdmin = this.props.user.administratedCoteries.includes(currentCoterie.uuid);\n    console.log(this.props.user);\n    return (\n      <div>\n        <Navbar title=\"Settings\" history={this.props.history} match={this.props.match}/>\n        {this.renderGroupInfo(currentCoterie)}\n\n        <List>\n          <List.Item\n           thumb={<KeyIcon style={{color: 'orange'}} />}\n           extra={currentCoterie.administrators.length}\n           arrow=\"horizontal\"\n           onClick={(e) => {this.showModal('adminModal', e)}}\n          >\n            Administrators\n          </List.Item>\n          <List.Item\n           thumb={<PeopleIcon style={{color: '42A5F5'}} />}\n           extra={currentCoterie.members.length}\n           arrow=\"horizontal\"\n           onClick={(e) => {this.showModal('memberModal', e)}}\n          >\n            Members\n          </List.Item>\n          { isAdmin &&\n            <List.Item\n             thumb={<PersonAddIcon style={{color: '#1BA39C'}} />}\n             onClick={(e) => {this.showModal('inviteDialog', e)}}\n            >\n              Add someone\n            </List.Item>\n          }\n        </List>\n\n        <WhiteSpace size=\"lg\" />\n        { !isAdmin &&\n          <List>\n            <List.Item\n             thumb={<ExitIcon style={{color: '#FF0000'}} />}\n             onClick={() => {\n               Modal.alert('Leave ' + currentCoterie.name + '?',\n               'Are you sure to exit this group? This cannot be undone',\n               [\n                 { text: 'Cancel' },\n                 { text: 'Leave', style:{color:'#FF0000'},\n                   onPress: () => {\n                     let data = new FormData();\n                     data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n                     this.props.leaveCoterie(data, currentCoterie.pk, currentCoterie.uuid);\n                     this.props.history.push('/explore');\n                 }},\n               ])\n             }}>\n              Leave group\n            </List.Item>\n          </List>\n        }\n        { isAdmin &&\n          <List>\n            <List.Item\n             thumb={<ExitIcon style={{color: '#FF0000'}} />}\n             onClick={() => {\n               Modal.alert('Delete ' + currentCoterie.name + '?',\n               'Are you sure? Deleting the group can affect all existing members. This cannot be undone',\n               [\n                 { text: 'Cancel' },\n                 { text: 'Leave', style:{color: '#FF0000'},\n                   onPress: () => {\n                     let data = new FormData();\n                     data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n                     this.props.deleteCoterie(data, currentCoterie.pk, currentCoterie.uuid);\n                     this.props.history.push('/explore');\n                 }},\n               ])\n             }}>\n              Delete group\n            </List.Item>\n          </List>\n        }\n\n        {this.renderAdminModal(currentCoterie)}\n        {this.renderMemberModal(currentCoterie)}\n        {this.renderInviteDialog()}\n        {this.renderEditDialog()}\n\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    coteries: state.coteries\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Settings);\n","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Explore from './explore';\nimport GroupExplore from './group_explore';\nimport Uploads from './uploads';\nimport Readlists from './readlists';\nimport Notifications from './notifications';\nimport Settings from './settings';\n\nconst Main = () => (\n  <main>\n    <Switch>\n      <Route path=\"/groups\" component={Groups}/>\n      <Route path='/explore' component={Explore}/>\n      <Route path='/uploads' component={Uploads}/>\n      <Route path='/readlists' component={Readlists}/>\n      <Route path='/notifications' component={Notifications}/>\n      <Route path='/settings' component={Settings}/>\n    </Switch>\n  </main>\n)\n\nconst Groups = ({match}) => {\n  return(\n    <Switch>\n      <Route path={`${match.url}/:groupUuid?/explore`} component={GroupExplore}/>\n      <Route path={`${match.url}/:groupUuid?/uploads`} component={Uploads}/>\n      <Route path={`${match.url}/:groupUuid?/readlists`} component={Readlists}/>\n      <Route path={`${match.url}/:groupUuid?/notifications`} component={Notifications}/>\n      <Route path={`${match.url}/:groupUuid?/settings`} component={Settings}/>\n    </Switch>\n  );\n};\n\nexport default Main;\n","import './App.css';\n\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\"\nimport { Link, Route, BrowserRouter as Router, Switch } from 'react-router-dom'\nimport React, { Component } from 'react'\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\nimport * as actions from './actions';\nimport BottomTabBar from './components/bottom_tab_bar';\nimport Main from './components/main';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport logo from './logo.svg'\n\n\nclass App extends Component {\n  state = {\n    loading: true\n  }\n\n  componentDidMount() {\n    this.props.getUser();\n    this.props.getMyCoteries().then(() => {\n      this.setState({loading: false})\n    });\n\n    // axios.get('/file_viewer/api/documents').then(response => {\n    //   this.setState({\n    //     data: response.data['uploadedDocuments'].sort((a, b) => a.title > b.title)\n    //   })\n    //   console.log(this.state)\n    // })\n\n    // axios.get('/file_viewer/api/readlists').then(response => {\n    //   console.log(response.data)\n    // })\n  }\n\n  render() {\n    if (_.isEmpty(this.props.user) || this.state.loading) {\n      return (\n        <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n      )\n    }\n\n    return (\n      <div className=\"App\">\n        <BottomTabBar\n          path={this.props.location.pathname}\n          history={this.props.history}\n          content={<Main />}\n        />\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    coteries: state.coteries,\n  };\n}\n\nexport default connect(mapStateToProps, actions)(App);\n","import React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport { Button, Icon, InputItem, List, NavBar, TextareaItem, WhiteSpace } from 'antd-mobile';\nimport { getCookie } from '../utilities/helper';\n\nclass CreateCoterieForm extends Component {\n\n  state = {\n    coterie_name: \"\",\n    coterie_description: \"\"\n  };\n\n  handleSubmit() {\n    let { coterie_name, coterie_description } = this.state;\n\n    let data = new FormData();\n    data.append('coterie_name', coterie_name);\n    data.append('coterie_description', coterie_description);\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n\n    this.props.createCoterie(data);\n    this.props.history.goBack();\n  }\n\n  render() {\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          icon={<Icon type=\"left\" color=\"#1BA39C\" />}\n          onLeftClick={() => this.props.history.goBack()}\n        >Create Group</NavBar>\n        <List renderHeader={() => 'You will be the administrator upon creation'}>\n          <InputItem\n            clear\n            placeholder=\"Name of the group\"\n            onChange={(value) => this.setState({coterie_name: value})}\n          >Name</InputItem>\n        </List>\n        <List renderHeader={() => 'Description'}>\n          <TextareaItem\n            rows={5}\n            count={100}\n            onChange={(value) => this.setState({coterie_description: value})}\n          />\n          <List.Item>\n            <Button\n              disabled={this.state.coterie_name.length === 0}\n              type=\"primary\"\n              style={{backgroundColor: \"#1BA39C\"}}\n              onClick={() => this.handleSubmit()}\n            >Create</Button>\n          </List.Item>\n        </List>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n  };\n}\n\nexport default connect(mapStateToProps, actions)(CreateCoterieForm);\n","import React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport { Button, Icon, InputItem, List, NavBar, TextareaItem, WhiteSpace } from 'antd-mobile';\nimport { getCookie } from '../utilities/helper';\n\nclass CreateReadlistForm extends Component {\n\n  state = {\n    readlist_name: \"\",\n    readlist_description: \"\"\n  };\n\n  handleSubmit() {\n    let { readlist_name, readlist_description } = this.state;\n\n    let data = new FormData();\n    data.append('readlist_name', readlist_name);\n    data.append('description', readlist_description);\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n\n    this.props.createReadlist(data);\n    this.props.history.goBack();\n  }\n\n  render() {\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          icon={<Icon type=\"left\" color=\"#1BA39C\" />}\n          onLeftClick={() => this.props.history.goBack()}\n        >Create Readlist</NavBar>\n        <List>\n          <InputItem\n            clear\n            placeholder=\"Name of the readlist\"\n            onChange={(value) => this.setState({readlist_name: value})}\n          >Name</InputItem>\n        </List>\n        <List renderHeader={() => 'Description'}>\n          <TextareaItem\n            rows={5}\n            count={100}\n            onChange={(value) => this.setState({readlist_description: value})}\n          />\n          <List.Item>\n            <Button\n              disabled={this.state.readlist_name.length === 0}\n              type=\"primary\"\n              style={{backgroundColor: \"#1BA39C\"}}\n              onClick={() => this.handleSubmit()}\n            >Create</Button>\n          </List.Item>\n        </List>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n  };\n}\n\nexport default connect(mapStateToProps, actions)(CreateReadlistForm);\n","import React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport { Button, Icon, InputItem, List, NavBar, TextareaItem, WhiteSpace, Modal } from 'antd-mobile';\nimport { getCookie } from '../utilities/helper';\nimport Avatar from '@material-ui/core/Avatar';\n\nclass EditReadlistForm extends Component {\n\n  state = {\n    readlist_name: \"\",\n    readlist_description: \"\"\n  };\n\n  componentDidMount() {\n    const { slug } = this.props.match.params\n    this.props.getReadlist(slug).then(() => {\n      this.setState({readlist_name: this.props.readlists.readlist.name, readlist_description: this.props.readlists.readlist.description})\n    });\n  }\n\n  handleSubmit() {\n    let { readlist_name, readlist_description } = this.state;\n\n    let data = new FormData();\n    data.append('new_name', readlist_name);\n    data.append('new_desc', readlist_description);\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n\n    this.props.editReadlist(this.props.readlists.readlist.rename_url, data)\n      .then(() => {this.props.editReadlist(this.props.readlists.readlist.change_desc_url, data)})\n      .then(() => {this.props.history.goBack()})\n  }\n\n  handleDelete() {\n    const readlist = this.props.readlists.readlist;\n    Modal.alert('Delete ' + this.state.readlist_name + '?', 'All followers and you will no longer have access', [\n      { text: 'Cancel' },\n      { text: 'Delete', style:{color:'#FF0000'},\n        onPress: () => {\n          let data = new FormData();\n          data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n          this.props.deleteReadlist(readlist.delete_url, data, readlist.slug);\n          this.props.history.push('/readlists')\n      }},\n    ])\n  }\n\n  render() {\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          icon={<Icon type=\"left\" color=\"#1BA39C\" />}\n          onLeftClick={() => this.props.history.goBack()}\n        >Edit Readlist</NavBar>\n      <WhiteSpace />\n      <WhiteSpace />\n        <List>\n          <InputItem\n            clear\n            placeholder=\"Name of the readlist\"\n            value={this.state.readlist_name}\n            onChange={(value) => this.setState({readlist_name: value})}\n          >Name</InputItem>\n        </List>\n        <List renderHeader={() => 'Description'}>\n          <TextareaItem\n            rows={5}\n            count={100}\n            value={this.state.readlist_description}\n            onChange={(value) => this.setState({readlist_description: value})}\n          />\n          <List.Item>\n            <Button\n              disabled={this.state.readlist_name.length === 0}\n              type=\"primary\"\n              style={{backgroundColor: \"#1BA39C\"}}\n              onClick={() => this.handleSubmit()}\n            >Edit</Button>\n          </List.Item>\n          <List.Item>\n            <Button\n              type=\"danger\"\n              type=\"primary\"\n              style={{backgroundColor: \"#e74c3c\"}}\n              onClick={() => this.handleDelete()}\n            >Delete</Button>\n          </List.Item>\n        </List>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    readlists: state.readlists\n  };\n}\n\nexport default connect(mapStateToProps, actions)(EditReadlistForm);\n","function range(end) {\n  return Array(end - 0).fill().map((_, idx) => 0 + idx)\n}\n\n\nfunction constructGetAnnotationsQueryUrl(slug, isGroupDocument) {\n  if (!isGroupDocument)\n    return '/file_viewer/api/documents/byslug/' + slug + '/annotations'\n  else\n    return '/coteries/api/coteriedocuments/byslug/' + slug + '/annotations'\n}\n\n\nfunction constructGetDocumentQueryUrl(slug, isGroupDocument) {\n  if (!isGroupDocument)\n    return '/file_viewer/api/documents/byslug/' + slug\n  else\n    return '/coteries/api/coteriedocuments/byslug/' + slug\n}\n\n\n/*eslint no-undef: \"off\"*/\nfunction renderMathJax() {\n  if (window.hasOwnProperty('MathJax'))\n    MathJax.Hub.Queue(['Typeset', MathJax.Hub])\n}\n\n\nexport {\n  range,\n  constructGetAnnotationsQueryUrl,\n  constructGetDocumentQueryUrl,\n  renderMathJax,\n}\n","import * as actions from '../../actions';\n\nimport { copyToClipboard, getCookie } from '../../utilities/helper';\nimport { faEllipsisV, faLink, faLocationArrow, faPencilAlt, faReply, faThumbsUp as faThumbsUped, faTrashAlt } from '@fortawesome/free-solid-svg-icons'\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Chip from '@material-ui/core/Chip';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Grid from '@material-ui/core/Grid';\nimport KeyboardArrowDown from '@material-ui/icons/KeyboardArrowDown';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport React from 'react'\nimport ReactDOM from 'react-dom';\nimport TimeAgo from 'react-timeago';\nimport Typography from '@material-ui/core/Typography';\nimport axios from 'axios'\nimport { connect } from 'react-redux';\nimport { faThumbsUp } from '@fortawesome/fontawesome-free-regular'\nimport {\n  renderMathJax,\n} from './document_viewer_helper'\nimport { withStyles } from '@material-ui/core/styles';\n\nconst SmallChip = withStyles({\n  root: {\n    height: '20px',\n    margin: '5px',\n  },\n  avatar: {\n    height: '20px',\n    width: '20px',\n  },\n})(Chip);\n\nconst SmallButton = withStyles({\n  root: {\n    minWidth: 0,\n  }\n})(Button);\n\nfunction reduce_comment(comment) {\n  var nickname, portrait_url, prefix, timeago, content\n  var isAnnotation = comment.annotator ? true : false\n  var author = isAnnotation ? comment.annotator : comment.replier\n  nickname = author.nickname ? author.nickname : 'Anonymous'\n  portrait_url = author.portrait_url ? (\n    author.portrait_url\n    ) : ('/media/portrait/anonymous_portrait.png')\n  if (comment.edit_time === null) {\n    prefix = 'posted'\n    timeago = comment.post_time\n  } else {\n    prefix = 'edited'\n    timeago = comment.edit_time\n  }\n  var content = comment.content\n  return {\n    nickname: nickname,\n    portrait_url: portrait_url,\n    prefix: prefix,\n    timeago: timeago,\n    content: content,\n    uuid: comment.uuid,\n    pk: comment.pk,\n    numReplies: comment.replies ? comment.replies.length : 0,\n    isAnnotation: isAnnotation\n  }\n}\n\nconst MENU_ITEM_HEIGHT = 48;\n\nclass AnnotationThread extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state.likeSet = new Set();\n  }\n\n  commentBlock (comment, isHead=false) {\n    return (\n      <div key={comment.uuid} className={isHead ? 'comment-head' : 'comment-body'}>\n        <Grid>\n          <Grid container justify=\"flex-start\" alignItems=\"center\" wrap=\"nowrap\">\n            <Grid item>\n              <SmallChip\n                label={comment.nickname}\n                avatar={<Avatar src={comment.portrait_url} />}\n              />\n            </Grid>\n            <Grid item>\n              <Typography variant=\"caption\">{comment.prefix} <TimeAgo date={comment.timeago} /></Typography>\n            </Grid>\n          </Grid>\n          {/* TOP ROW OF COMMENT --- Contains: content */}\n          <Grid>\n            <div className='comment-text' dangerouslySetInnerHTML={{__html: comment.content}}></div>\n          </Grid>\n          {/* BOTTOM ROW OF COMMENT --- Contains: User info, 4 buttons to modify comment */}\n          <Grid container justify=\"space-between\" alignItems=\"center\" wrap=\"nowrap\">\n            {/* BOTTOM ROW LEFT SIDE --- Contains: portrait, name, post/edit time */}\n            <Grid container justify=\"flex-start\" alignItems=\"center\" wrap=\"nowrap\">\n              {isHead && <SmallChip icon={<KeyboardArrowDown/>} label={comment.numReplies + ((comment.numReplies === 1) ? ' reply' : ' replies')} variant='outlined'></SmallChip>}\n            </Grid>\n            {/* BOTTOM ROW RIGHT SIDE --- Contains: Locate, Reply, Like, More options */}\n            <Grid container justify=\"flex-end\" alignItems=\"center\" wrap=\"nowrap\">\n              {isHead && //Locate Arrow only exists for header\n              <Grid item>\n                <SmallButton color=\"primary\" onClick={() => {this.locateComment(this.props.annotationArea)}} >\n                  <FontAwesomeIcon icon={faLocationArrow} />\n                </SmallButton>\n              </Grid>}\n              <Grid item>\n                <SmallButton color=\"primary\" onClick={() => {isHead ? this.replyAnnotation(comment) : this.replyReply(comment)}} >\n                  <FontAwesomeIcon icon={faReply} />\n                </SmallButton>\n              </Grid>\n              <Grid item>\n                <SmallButton color=\"primary\" style={{color: '#1BA39C'}} disabled={this.state.likeSet.has(comment.uuid)} onClick={() => {isHead ? this.likeAnnotation(comment) : this.likeReply(comment)}} >\n                  <FontAwesomeIcon icon={this.state.likeSet.has(comment.uuid) ? faThumbsUped : faThumbsUp} />\n                </SmallButton>\n              </Grid>\n              <Grid item>\n                <SmallButton color=\"primary\" onClick={event => this.openContextMenu(event, comment, isHead)}>\n                  <FontAwesomeIcon icon={faEllipsisV} />\n                </SmallButton>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </div>\n    )\n  }\n\n  state = {\n    commentMenuElement: null,\n    commentMenuUuid: null,\n  };\n\n  openContextMenu = (event, comment, isHead) => {\n    this.setState({\n      commentMenuElement: event.currentTarget,\n      selectedComment: comment,\n      selectedCommentIsReply: !isHead,\n    });\n  };\n\n  closeContextMenu = value => {\n    this.setState({\n      commentMenuElement: null,\n      selectedComment: null,\n    });\n  };\n\n  /** LOCATE REPLY LIKE EDIT SHARE DELETE */\n\n  locateComment = (element) => {\n    element.scrollIntoView({behavior: \"smooth\"});\n  }\n\n  replyAnnotation = (comment) => {\n    this.props.setParentState({\n      replyToAnnotationReplyId: null,\n      replyToAnnotationReplyUuid: null,\n      annotationOpen: false,\n      annotationLinearLinkedListOpen: true,\n    }) /**Hide current annotation drawer and show text input */\n  }\n\n  replyReply = (comment) => {\n    this.props.setParentState({\n      replyToAnnotationReplyId: comment.pk,\n      replyToAnnotationReplyUuid: comment.uuid,\n      annotationOpen: false,\n      annotationLinearLinkedListOpen: true,\n    }) /**Hide current annotation drawer and show text input */\n  }\n\n  likeAnnotation = (comment) => {\n    var data = new FormData()\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n    data.append('operation', 'like_annotation')\n    data.append('annotation_id', comment.pk)\n    axios.post(window.location.pathname + '/', data).then(response => {\n      this.setState({likeSet: this.state.likeSet.add(comment.uuid)})\n    })\n  }\n\n  likeReply = (comment) => {\n    var data = new FormData()\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n    data.append('operation', 'like_annotation_reply')\n    data.append('annotation_reply_id', comment.pk)\n    axios.post(window.location.pathname + '/', data).then(response => {\n      this.setState({likeSet: this.state.likeSet.add(comment.uuid)})\n    })\n  }\n\n  editComment = () => {\n    this.closeContextMenu();\n    this.props.setParentState({\n      annotationOpen: false,\n      editCommentOpen: true,\n      editTextContent: this.state.selectedComment.content,\n      selectedComment: this.state.selectedComment,\n    })\n  }\n\n  shareComment = () => {\n    let url = [window.location.protocol, '//', window.location.host, window.location.pathname].join('') + '?annotation=' + this.state.selectedComment.uuid;\n    copyToClipboard(url);\n    /* TODO: Debug why not copying. Add toast to indicate copied to clipboard to util? or here. Change to share function in future?*/\n    console.log(url)\n    this.closeContextMenu();\n  }\n\n  deleteComment = () => {\n    var operation = this.state.selectedCommentIsReply ? 'delete_annotation_reply' : 'delete_annotation'\n    var idType = this.state.selectedCommentIsReply ? 'reply_id' : 'annotation_id'\n    var index = parseInt(this.state.selectedComment.page_index)\n    var data = new FormData()\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n    data.append('operation', operation)\n    data.append(idType, this.state.selectedComment.pk)\n    data.append('document_id', this.props.pdfDocument.pk)\n    console.log(this.state.selectedComment)\n    var selectedAnnotation = this.props.selectedAnnotation;\n    var annotations = this.props.annotations\n    var annotationsByPage = this.props.annotationsByPage\n    var selectedComment = this.state.selectedComment\n    axios.post(window.location.pathname + '/', data).then(response => {\n      console.log(response)\n      console.log(annotations)\n      console.log(annotationsByPage)\n      if (this.state.selectedCommentIsReply) {\n        var i = 0\n        selectedAnnotation.replies.map((reply) => {\n          if (reply.uuid == selectedComment.uuid) {\n            selectedAnnotation.replies.splice(i, 1)\n            annotations[selectedAnnotation.uuid] = selectedAnnotation\n            this.props.setParentState({annotations: annotations})\n          }\n          i++;\n        })\n      } else {\n        delete annotations[selectedAnnotation.uuid]\n        var i = 0\n        annotationsByPage[selectedAnnotation.page_index].map((annotation) => {\n          if (annotation.uuid == selectedAnnotation.uuid) {\n            annotationsByPage[selectedAnnotation.page_index].splice(i, 1)\n            this.props.setParentState({\n              annotations: annotations,\n              annotationsByPage: annotationsByPage,\n              annotationOpen: false,\n              selectedAnnotation: undefined,\n            })\n          }\n          i ++;\n        })\n      }\n    })\n    this.closeContextMenu();\n  }\n\n  componentDidMount() {\n    renderMathJax()\n  }\n\n  render() {\n    const { commentMenuElement } = this.state;\n    const open = Boolean(commentMenuElement);\n    var selectedAnnotation = this.props.selectedAnnotation;\n    return (\n      <div>\n        {this.commentBlock(reduce_comment(selectedAnnotation), true)}\n        {selectedAnnotation.replies.map(reply =>\n          this.commentBlock(reduce_comment(reply))\n        )}\n        <Menu\n          className='menu'\n          anchorEl={commentMenuElement}\n          open={open}\n          onClose={this.closeContextMenu}\n          PaperProps={{\n            style: {\n              maxHeight: MENU_ITEM_HEIGHT * 4.5,\n            },\n          }}\n        >\n          <MenuItem onClick={this.editComment}>\n            <SmallButton color=\"primary\">\n              <FontAwesomeIcon icon={faPencilAlt} />\n            </SmallButton><Typography>Edit</Typography>\n          </MenuItem>\n          <MenuItem onClick={this.shareComment}>\n            <SmallButton color=\"primary\">\n              <FontAwesomeIcon icon={faLink} />\n            </SmallButton><Typography>Share link</Typography>\n          </MenuItem>\n          <MenuItem onClick={this.deleteComment}>\n            <SmallButton color=\"primary\">\n              <FontAwesomeIcon icon={faTrashAlt} />\n            </SmallButton><Typography>Delete</Typography>\n          </MenuItem>\n        </Menu>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    coteries: state.coteries,\n    // document: state.document,\n  };\n}\n\nexport default connect(mapStateToProps, actions)(AnnotationThread);\n","import Button from '@material-ui/core/Button';\nimport React from 'react'\nimport { withStyles } from '@material-ui/core/styles';\nimport Grow from '@material-ui/core/Grow';\n\n\nconst styles = theme => ({\n  root: {\n    position: 'relative',\n    minHeight: 200,\n  },\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing.unit * 2,\n    right: theme.spacing.unit * 2,\n  },\n});\n\n\nclass FlaoatingButton extends React.Component {\n  constructor(props, context) {\n    super(props, context)\n    this.state = {\n      value: 0,\n      content: undefined,\n    };\n\n    this.onClick = () => {\n      this.props.clickCallback()\n    }\n  }\n\n\n  render() {\n    const { classes, theme } = this.props;\n    const transitionDuration = {\n      enter: theme.transitions.duration.enteringScreen,\n      exit: theme.transitions.duration.leavingScreen,\n    };\n\n    return (\n      // <div>\n        <Grow in={this.props.show}>\n          <Button\n            variant=\"fab\"\n            className={classes.fab + ' scan-receipt-btn'}\n            style={{position: 'fixed', bottom: 60, zIndex: 1000, backgroundColor: this.props.color,}}\n            onClick={this.onClick}\n          >\n            {this.props.icon}\n          </Button>\n        </Grow>\n      // </div>\n    );\n  }\n}\n\nexport default withStyles(styles, { withTheme: true })(FlaoatingButton);\n","import './document_viewer.css'\n\nimport * as actions from '../../actions';\n\nimport { ActivityIndicator, Icon, NavBar, TextareaItem } from 'antd-mobile';\nimport {MuiThemeProvider, createMuiTheme} from '@material-ui/core/styles';\nimport {\n  constructGetAnnotationsQueryUrl,\n  constructGetDocumentQueryUrl,\n  range,\n} from './document_viewer_helper'\nimport {\n  faPaperPlane,\n  faTimesCircle\n} from '@fortawesome/free-solid-svg-icons'\n\nimport AddComment from '@material-ui/icons/AddComment';\nimport AnnotationThread from './annotation_thread'\nimport Avatar from '@material-ui/core/Avatar';\nimport DoneAll from '@material-ui/icons/DoneAll';\nimport Drawer from '@material-ui/core/Drawer';\nimport FloatButton from './float_button'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport React from 'react'\nimport { Rnd } from 'react-rnd'\nimport Tappable from 'react-tappable';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport axios from 'axios'\nimport { connect } from 'react-redux';\nimport { getCookie } from '../../utilities/helper';\nimport { library } from '@fortawesome/fontawesome-svg-core'\n\nlibrary.add(faPaperPlane, faTimesCircle)\n\n// import Drawer from 'rc-drawer';\n\n// const TAP_TIME_THRESHOLD = 180  // in milisecond\n\n/*eslint no-undef: \"off\"*/\n\nconst RENDERING = 'RENDERING'\nconst ANNOTATION_WIDTH_THRESHOLD = 8\nconst ANNOTATION_HEIGHT_THRESHOLD = 8\n\n\nclass DocumentViewer extends React.Component {\n  constructor(props) {\n    super(props)\n    this.pdfDoc = undefined\n    this.taskList = []\n    this.finishList = []\n    this.rendering = false\n    this.clearnessLevel = 3.8  // too small then not clear, not large then rendering consumes much resource\n    this.currentPageIndex = 1\n    this.annotationAreas = {}\n    this.prevScroll = window.pageYOffset\n    this.annotationFirstTouch = false\n    // this.touchLength = 0\n    this.state = {\n      document: {\n        title: ''\n      },\n      loading: true,\n      numPages: 0,\n      currentScale: 1,\n      scaleFactor: 1.08,\n      sampleWidth: undefined,\n      sampleHeight: undefined,\n      annotations: {},\n      annotationsByPage: {},\n      annotationOpen: false,\n      annotationLinearLinkedListOpen: false,\n      editCommentOpen: false,\n      newAnnotationInputOpen: false,\n      selectedAnnotation: undefined,\n      mode: 'view',  // view or comment\n      showFloatButton: true,\n      creatingAnnotationAtPageIndex: undefined,\n      newAnnotationContent: '',\n      newAnnotationReplyContent: '',\n      editTextContent: '',\n      // pageCanvasWidth: 660,\n    }\n\n    this.dynamicRenderOnScroll = () => {\n      var pageIndex = Math.ceil((window.pageYOffset / this.viewerWrappper.scrollHeight * this.state.numPages))\n      if (pageIndex === this.currentPageIndex)\n        return\n\n      this.currentPageIndex = pageIndex\n\n      const left = 2\n      const right = 6\n      var renderOrNot = range(right + left + 1).map(i => true)\n\n      // clear pages which are out of view\n      var index = 0\n      for (var i = 0; i < this.finishList.length; i++) {\n        if (this.finishList[index] - pageIndex >= -left && this.finishList[index] - pageIndex <= right) {\n          renderOrNot[this.finishList[index] - (pageIndex - left)] = false\n          index += 1\n        } else {\n          var pre = document.getElementById('page-canvas-' + this.finishList[index])\n          pre.width = 0\n          pre.height = 0\n          this.finishList.splice(index, 1)\n        }\n      }\n\n      // keep the first renderTask since it is still in RENDERING status,\n      // delete the rest since they are in PENDING status\n      this.taskList.splice(1)\n\n      // add in the new task\n      for (var i = 0; i < renderOrNot.length; i++)\n        if (renderOrNot[i])\n          this.pushNewPageRenderingTask(pageIndex - left + i)\n      if (!this.rendering)\n        this.renderTaskList()\n    }\n\n    this.handleScroll = () => {\n      this.dynamicRenderOnScroll()\n      const thisScroll = window.pageYOffset\n      if (thisScroll - this.prevScroll > 8)  // scroll down\n        this.setState({showFloatButton: false})\n      else if (this.prevScroll - thisScroll > 8)\n        this.setState({showFloatButton: true})\n      this.prevScroll = thisScroll\n    }\n\n    this.pushNewPageRenderingTask = (pageIndex) => {\n      if (pageIndex >= 1 && pageIndex <= this.state.numPages)\n        this.taskList.push({\n          pageIndex: pageIndex,\n          status: RENDERING,\n          taskObj: null,\n        })\n    }\n\n    this.renderTaskList = () => {\n      if (this.taskList.length <= 0)\n        return\n      this.rendering = true\n      var scale = this.state.currentScale\n      var clearnessLevel = this.clearnessLevel\n\n      var currentPageIndex = this.taskList[0].pageIndex\n      const self = this\n      this.pdfDoc.getPage(currentPageIndex).then(function(page) {\n        var canvas = document.getElementById('page-canvas-' + currentPageIndex)\n        if (canvas === null) return\n        var context = canvas.getContext('2d')\n        var viewport = page.getViewport(clearnessLevel * scale)\n        canvas.height = viewport.height\n        canvas.width = viewport.width\n        canvas.style.height = viewport.height / clearnessLevel + 'px'\n        canvas.style.width = viewport.width / clearnessLevel + 'px'\n        var renderContext = {\n          canvasContext: context,\n          viewport: viewport,\n        }\n        self.taskList[0].status = RENDERING\n        self.taskList[0].taskObj = page.render(renderContext)\n        self.taskList[0].taskObj.promise.then(function() {\n          self.taskList.shift()\n          self.finishList.push(currentPageIndex)\n          self.rendering = false\n          self.renderTaskList()\n        })\n      })\n    }\n\n    this.renderAnnotationAreas = (numPages) => {\n      axios.get(constructGetAnnotationsQueryUrl(this.props.match.params.slug, this.props.isGroupDocument)).then(response => {\n        var data = response.data\n\n        var annotationsByPage = {}\n        var annotations = {}\n        for (var i = 1; i <= numPages; i++)\n          annotationsByPage[i] = []\n        for (var annotation of data) {\n          annotationsByPage[parseInt(annotation.page_index)].push(annotation)\n          annotations[annotation.uuid] = annotation\n        }\n\n        this.setState({\n          annotations: annotations,\n          annotationsByPage: annotationsByPage\n        })\n        console.log(annotations)\n        console.log(annotationsByPage)\n      })\n    }\n\n    this.configSizeAccordingToLastPageAndRenderTheFirstSeveralPages = (pdf) => {\n      const self = this\n      pdf.getPage(pdf.numPages).then(function(lastPage) {\n        var currentScale = (window.innerWidth * 1.0) / lastPage.getViewport(1).width\n\n        self.setState({\n          currentScale: currentScale,\n          sampleWidth: lastPage.getViewport(currentScale).width,\n          sampleHeight: lastPage.getViewport(currentScale).height\n        })\n        self.pushNewPageRenderingTask(1)\n        self.pushNewPageRenderingTask(2)\n        self.renderTaskList()\n      })\n    }\n\n    this.styleDrawer = () => {\n      if (this.annotationWrapper === undefined) return\n      if (this.annotationWrapper.parentElement.classList.contains('annotation-drawer')) return\n      this.annotationWrapper.parentElement.classList.add('annotation-drawer')\n    }\n\n    this.selectAnnotation = (uuid) => {\n      if (this.state.selectedAnnotation !== undefined)\n        this.annotationAreas[this.state.selectedAnnotation.uuid].classList.remove('highlighted-annotation-area')\n\n      this.setState({selectedAnnotation: this.state.annotations[uuid]})\n      this.annotationAreas[uuid].classList.add('highlighted-annotation-area')\n      const rgba = this.annotationAreas[uuid].style.background\n      this.annotationAreas[uuid].style.borderColor = rgba.split(',').slice(0,3).join(',') + ', 0.38)'\n\n      if (!this.state.annotationOpen) {\n        this.styleDrawer()\n        this.setState({ annotationOpen: true, annotationLinearLinkedListOpen: false, editCommentOpen: false });\n      }\n    }\n\n    this.deselectAnnotation = () => {\n      if (this.state.selectedAnnotation !== undefined)\n        this.annotationAreas[this.state.selectedAnnotation.uuid].classList.remove('highlighted-annotation-area')\n      this.setState({ annotationOpen: false });\n      this.setState({ selectedAnnotation: undefined })\n    }\n\n    this.lockScroll = (e) => {\n      if (e.targetTouches.length === 1)\n        e.preventDefault()\n    }\n\n    this.changeToCommentMode = () => {\n      this.setState({mode: 'comment'})\n      document.getElementsByTagName(\"BODY\")[0].addEventListener('touchmove', this.lockScroll, { passive: false })\n    }\n\n    this.changeToViewMode = () => {\n      this.setState({mode: 'view', creatingAnnotationAtPageIndex: undefined, newAnnotationInputOpen: false})\n      document.getElementsByTagName(\"BODY\")[0].removeEventListener('touchmove', this.lockScroll)\n    }\n\n    this.postAnnotation = () => {\n      if (this.state.newAnnotationWidth < ANNOTATION_WIDTH_THRESHOLD || this.state.newAnnotationHeight < ANNOTATION_HEIGHT_THRESHOLD)\n        return\n\n      var data = new FormData()\n      data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n      data.append('operation', 'annotate')\n      data.append('page_id', 'page_id_' + this.state.creatingAnnotationAtPageIndex)\n      data.append('annotation_content', this.state.newAnnotationContent)\n      data.append('top_percent', this.state.newAnnotationY / this.state.sampleHeight)\n      data.append('left_percent', this.state.newAnnotationX / this.state.sampleWidth)\n      data.append('height_percent', this.state.newAnnotationHeight / this.state.sampleHeight)\n      data.append('width_percent', this.state.newAnnotationWidth / this.state.sampleWidth)\n      data.append('frame_color', window.getComputedStyle(document.getElementById('annotation-being-created') ,null).getPropertyValue('background-color'))\n      data.append('document_id', this.state.document.pk)\n      data.append('is_public', true)\n      axios.post(window.location.pathname + '/', data).then(response => {\n        var newAnnotation = response.data['new_annotation_json']\n        var annotationsByPage = this.state.annotationsByPage\n        var annotations = this.state.annotations\n        annotationsByPage[parseInt(newAnnotation.page_index)].push(newAnnotation)\n        annotations[newAnnotation.uuid] = newAnnotation\n        this.setState({\n          annotations: annotations,\n          annotationsByPage: annotationsByPage,\n          newAnnotationContent: '',\n          mode: 'view', creatingAnnotationAtPageIndex: undefined, newAnnotationInputOpen: false\n        })\n        document.getElementsByTagName(\"BODY\")[0].removeEventListener('touchmove', this.lockScroll)\n      })\n    }\n\n    this.cancelCurrentAnnotation = () => {\n      this.setState({creatingAnnotationAtPageIndex: undefined, newAnnotationInputOpen: false})\n    }\n\n    this.postAnnotationReply = () => {\n      var data = new FormData()\n      console.log(this.state.replyToAnnotationReplyId)\n      data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n      data.append('operation', 'reply_annotation')\n      data.append('annotation_reply_content', this.state.newAnnotationReplyContent)\n      data.append('reply_to_annotation_id', this.state.selectedAnnotation.pk)\n      this.state.replyToAnnotationReplyId && data.append('reply_to_annotation_reply_id', this.state.replyToAnnotationReplyId)\n      data.append('document_id', this.state.document.pk)\n      data.append('is_public', true)\n      axios.post(window.location.pathname + '/', data).then(response => {\n        var annotations = this.state.annotations\n        annotations[this.state.selectedAnnotation.uuid].replies.push(response.data['new_annotationreply_json'])\n        this.setState({annotations: annotations,\n                        newAnnotationReplyContent: '',\n                        annotationOpen: true, annotationLinearLinkedListOpen: false,})\n      })\n    }\n\n    this.cancelCurrentAnnotationReply = () => {\n      this.setState({annotationOpen: true, annotationLinearLinkedListOpen: false,})\n    }\n\n    this.postEdit = () => {\n      var appName = window.location.pathname.split('/')[1]\n      var api = this.state.selectedComment.isAnnotation ? '/api/annotations/' : '/api/annotationreplies/'\n      var path = '/' + appName + api + this.state.selectedComment.pk + '/edit'\n      console.log(path)\n      var data = new FormData()\n      data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n      data.append('new_content', this.state.editTextContent)\n      axios.post(path, data).then(response => {\n        var annotations = this.state.annotations\n        if (this.state.selectedComment.isAnnotation) {\n          annotations[this.state.selectedAnnotation.uuid].content = this.state.editTextContent\n        } else {\n          for (var i=0; i < annotations[this.state.selectedAnnotation.uuid].replies.length; i++) {\n            if (annotations[this.state.selectedAnnotation.uuid].replies[i].uuid == this.state.selectedComment.uuid) {\n              annotations[this.state.selectedAnnotation.uuid].replies[i].content = this.state.editTextContent\n              break\n            }\n          }\n        }\n        this.setState({\n          annotationOpen: true,\n          editCommentOpen: false,\n          annotations: annotations,\n        })\n      })\n    }\n\n    this.cancelEdit = () => {\n      this.setState({annotationOpen: true, editCommentOpen: false,})\n    }\n  }\n\n  componentDidMount() {\n    axios.get(constructGetDocumentQueryUrl(this.props.match.params.slug, this.props.isGroupDocument)).then(response => {\n      this.setState({\n        document: response.data\n      })\n      console.log(response.data)\n      PDFJS.workerSrc = '/static/pdfjs/pdf.worker.js'\n\n      const self = this\n      PDFJS.getDocument(response.data.url).then(function(pdf) {  // hard code a pdf ulr and test\n        self.pdfDoc = pdf\n        self.setState({\n          numPages: pdf.numPages,\n        })\n        self.setState({loading: false})\n        self.renderAnnotationAreas(pdf.numPages)\n        self.configSizeAccordingToLastPageAndRenderTheFirstSeveralPages(pdf)\n      })\n\n      window.addEventListener('scroll', this.handleScroll, { passive: true })\n    })\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.handleScroll)\n  }\n\n  render() {\n    var selectedAnnotation = this.state.selectedAnnotation\n\n    function getPositionRelativeToPageTopLeft(e, pageIndex) {\n      var touch_absolute_x = e.touches.item(0).pageX  // relative to the left top corner of the body\n      var touch_absolute_y = e.touches.item(0).pageY\n      const page = document.getElementById('page-div-' + pageIndex)\n      const page_top_left_x = page.offsetLeft\n      const page_top_left_y = page.offsetTop\n      return [touch_absolute_x - page_top_left_x, touch_absolute_y - page_top_left_y]\n    }\n\n    function gestureOnRND(e) {\n      var target;\n      if (e.touches.item(0) === null)\n        target = e.target\n      else\n        target = e.touches.item(0).target\n      const annotationBeingCreated = document.getElementById('annotation-being-created')\n      if (annotationBeingCreated !== null)\n        if (annotationBeingCreated === target || annotationBeingCreated.contains(target))\n          return true\n      return false\n    }\n\n    var viewWrapper = (\n      <div\n        ref={(ele) => this.viewerWrappper = ele}\n        className='viewer-wrapper'\n      >\n        {\n          range(this.state.numPages).map((i) => {\n            const pageIndex = i + 1\n            return (\n              <div\n                className='page-div' key={pageIndex}\n                id={'page-div-' + pageIndex}\n                style={{position: 'relative', width: this.state.sampleWidth, height: this.state.sampleHeight}}\n                onTouchStart={(e) => {\n                  if (this.state.mode === 'view') return\n                  if (gestureOnRND(e)) return\n                  if (this.state.creatingAnnotationAtPageIndex !== undefined && this.state.creatingAnnotationAtPageIndex === pageIndex) return\n\n                  this.annotationFirstTouch = true\n                  const [bottom_right_relative_x, bottom_right_relative_y] = getPositionRelativeToPageTopLeft(e, pageIndex)\n                  this.setState({\n                    creatingAnnotationAtPageIndex: pageIndex,\n                    originalAnnotationX: bottom_right_relative_x,\n                    originalAnnotationY: bottom_right_relative_y,\n                    newAnnotationX: bottom_right_relative_x,\n                    newAnnotationY: bottom_right_relative_y,\n                    newAnnotationWidth: 0,\n                    newAnnotationHeight: 0,\n                  })\n                }}\n                onTouchMove={(e) => {\n                  if (this.state.mode === 'view') return\n                  if (gestureOnRND(e)) return\n                  if (!this.annotationFirstTouch) return\n\n                  const [bottom_right_relative_x, bottom_right_relative_y] = getPositionRelativeToPageTopLeft(e, pageIndex)\n                  var newAnnotationX = bottom_right_relative_x > this.state.originalAnnotationX ? this.state.originalAnnotationX : bottom_right_relative_x\n                  newAnnotationX = Math.max(0.01, newAnnotationX)\n                  var newAnnotationY = bottom_right_relative_y > this.state.originalAnnotationY ? this.state.originalAnnotationY : bottom_right_relative_y\n                  newAnnotationY = Math.max(0.01, newAnnotationY)\n\n                  var newAnnotationWidth = Math.abs(bottom_right_relative_x - this.state.originalAnnotationX)\n                  if (bottom_right_relative_x < this.state.originalAnnotationX)\n                    newAnnotationWidth = Math.min(newAnnotationWidth, this.state.originalAnnotationX)\n                  else\n                    newAnnotationWidth = Math.min(newAnnotationWidth, this.state.sampleWidth - newAnnotationX)\n\n                  var newAnnotationHeight = Math.abs(bottom_right_relative_y - this.state.originalAnnotationY)\n                  if (bottom_right_relative_y < this.state.originalAnnotationY)\n                    newAnnotationHeight = Math.min(newAnnotationHeight, this.state.originalAnnotationY)\n                  else\n                    newAnnotationHeight = Math.min(newAnnotationHeight, this.state.sampleHeight - newAnnotationY)\n\n                  this.setState({ newAnnotationWidth: newAnnotationWidth, newAnnotationHeight: newAnnotationHeight })\n                  this.rnd.updatePosition({ x: newAnnotationX, y: newAnnotationY })\n                }}\n                onTouchEnd={(e) => {\n                  if (this.state.mode === 'view') return\n                  if (gestureOnRND(e)) return\n                  this.setState({\n                    newAnnotationX: this.rnd.draggable.state.x,\n                    newAnnotationY: this.rnd.draggable.state.y,\n                    newAnnotationWidth: this.rnd.props.size.width,\n                    newAnnotationHeight: this.rnd.props.size.height,\n                  })\n                  if (this.annotationFirstTouch) {\n                    this.annotationFirstTouch = false\n                    this.setState({newAnnotationInputOpen: true})\n                    return\n                  }\n                }}\n              >\n                <canvas style={{position: 'absolute'}} className='page-canvas' id={'page-canvas-' + (i + 1)}></canvas>\n                {\n                  this.state.creatingAnnotationAtPageIndex === pageIndex ?\n                  <Rnd\n                    ref={c => { this.rnd = c; }}\n                    bounds='parent'\n                    size={{ width: this.state.newAnnotationWidth,  height: this.state.newAnnotationHeight }}\n                    id='annotation-being-created'\n                    className='annotation-area'\n                    onDragStop={(e, d) => { this.setState({ newAnnotationX: d.x, newAnnotationY: d.y }) }}\n                    onResizeStop={(e, direction, ref, delta, position) => {\n                      direction = direction.toLowerCase()\n                      this.setState({\n                        newAnnotationWidth: parseFloat(ref.style.width),\n                        newAnnotationHeight: parseFloat(ref.style.height),\n                        newAnnotationX: position.x - (direction.includes(\"left\") ? delta.width : 0),\n                        newAnnotationY: position.y - (direction.includes(\"top\") ? delta.height : 0),\n                      });\n                    }}\n                  >\n                  </Rnd> : null\n                }\n                {\n                  this.state.annotationsByPage[pageIndex] !== undefined ?\n                    this.state.annotationsByPage[pageIndex].map(annotation =>\n                      <Tappable\n                        key={annotation.pk}\n                        moveThreshold={10}\n                        onTap={() => {\n                          if (this.state.mode === 'comment') return\n                          this.selectAnnotation(annotation.uuid)\n                        }}\n                      >\n                        <div\n                          className='annotation-area'\n                          style={{\n                            background: annotation.frame_color,\n                            position: 'absolute',\n                            width: this.state.sampleWidth * annotation.width_percent,\n                            height: this.state.sampleHeight * annotation.height_percent,\n                            left: this.state.sampleWidth * annotation.left_percent,\n                            top: this.state.sampleHeight * annotation.top_percent,\n                          }}\n                          ref={ele => this.annotationAreas[annotation.uuid] = ele}\n                          annotation-id={annotation.pk}\n                          annotation-uuid={annotation.uuid}\n                        >\n                        </div>\n                      </Tappable>\n                    ) : null\n                }\n              </div>\n            )\n          })\n        }\n      </div>\n    )\n\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          icon={<Icon type=\"left\" onClick={() => this.props.history.goBack()}/>}\n          rightContent={[\n            <Icon key=\"1\" type=\"ellipsis\" />,\n          ]}\n          style={{\n            boxShadow: '0px 1px 3px rgba(28, 28, 28, .1)',\n            zIndex: 10000000, position: 'relative',\n            // borderBottom: '1px solid #c8c8c8',\n            // height: 38\n          }}\n        >\n          <span className='document-title'>{this.state.document.title}</span>\n        </NavBar>\n\n        <ActivityIndicator toast animating={this.state.loading} />\n\n        <Tappable\n          // onTouchStart={e => this.touchTimer = setInterval((() => this.touchLength += 10), 10)}\n          moveThreshold={10}\n          onTap={(e) => {\n            // console.log(e.targetTouches)\n            // console.log(e.target)\n            // console.log(e.touches)\n            // console.log(this.touchLength)\n            // if (this.touchLength < TAP_TIME_THRESHOLD) {\n            if (this.state.mode === 'comment') return\n            const target = e.target\n            if (target.classList.contains('page-canvas'))\n              this.deselectAnnotation()\n            this.setState({showFloatButton: !this.state.showFloatButton})\n            // }\n            // this.touchLength = 0\n            // clearInterval(this.touchTimer)\n          }}\n        >\n          {viewWrapper}\n        </Tappable>\n\n        <Drawer\n          anchor=\"bottom\"\n          open={this.state.annotationOpen}\n          onClose={() => this.deselectAnnotation()}\n          // ModalProps={{BackdropProps: {invisible: true}}}\n          variant='persistent'\n        >\n          <div ref={ele => this.annotationWrapper = ele}>\n            {\n              selectedAnnotation !== undefined ? (\n                <AnnotationThread\n                  document={this.state.document}\n                  selectedAnnotation={selectedAnnotation}\n                  annotationArea={this.annotationAreas[selectedAnnotation.uuid]}\n                  annotations={this.state.annotations}\n                  annotationsByPage={this.state.annotationsByPage}\n                  setParentState={this.setState.bind(this)}\n                  pdfDocument={this.state.document}\n                />\n              ) : null\n            }\n          </div>\n        </Drawer>\n\n        <Drawer\n          anchor=\"bottom\" variant='persistent'\n          open={this.state.newAnnotationInputOpen}\n        >\n          <div style={{textAlign: 'center'}}>\n            {/* <TextareaItem\n              title={<img\n                alt=\"Remy Sharp\"\n                style={{ height: 28, width: 28 }}\n                src=\"https://pmcvariety.files.wordpress.com/2015/07/naruto_movie-lionsgate.jpg?w=1000\"\n              />}\n              placeholder=\"auto focus in Alipay client\"\n              data-seed=\"logId\"\n              ref={el => this.autoFocusInst = el}\n              autoHeight\n            /> */}\n            <Avatar\n              alt=\"User Portrait\"\n              style={{ float: 'left', marginTop: '2%', marginLeft: '2%'}}\n              src={this.props.user.portrait_url}\n            />\n            <MuiThemeProvider theme={createMuiTheme({\n                palette: {\n                  primary: {\n                    main: '#3498db',\n                  }\n                },\n              })}\n            >\n              <TextField\n                id=\"standard-bare\"\n                // className={classes.textField}\n                // defaultValue=\"Bare\"\n                placeholder=\"Type in your comment...\" margin=\"normal\" style={{width: '66vw', top: -2}}\n                multiline fullWidth value={this.state.newAnnotationContent}\n                onChange={event => {\n                  this.setState({newAnnotationContent: event.target.value})\n                }}\n              />\n            </MuiThemeProvider>\n            {\n              this.state.newAnnotationContent.length === 0\n              ? <FontAwesomeIcon icon={['fas', 'times-circle']} id='cancel-annotation-btn' onClick={this.cancelCurrentAnnotation} />\n              : <FontAwesomeIcon icon={['fas', 'paper-plane']} id='post-annotation-btn' onClick={this.postAnnotation} />\n            }\n          </div>\n        </Drawer>\n\n        <Drawer\n          anchor=\"bottom\"\n          open={this.state.annotationLinearLinkedListOpen}\n          onClose={() => this.reopenAnnotationThread()}\n          variant='persistent'\n        >\n          {/* <Grid container justify=\"space-between\" alignItems=\"center\"> */}\n          <div style={{textAlign: 'center'}}>\n            <Avatar\n              alt=\"User Portrait\"\n              style={{ float: 'left', marginTop: '2%', marginLeft: '2%'}}\n              src={this.props.user.portrait_url}\n            />\n            <MuiThemeProvider theme={createMuiTheme({\n                palette: {\n                  primary: {\n                    main: '#3498db',\n                  }\n                },\n              })}\n            >\n              <TextField\n                ref={ele => this.annotationReplyText = ele}\n                // className={classes.textField}\n                // defaultValue=\"Bare\"\n                placeholder=\"Type in your reply...\" margin=\"normal\" style={{width: '66vw', top: -2}}\n                multiline fullWidth value={this.state.newAnnotationReplyContent}\n                onChange={event => {\n                  this.setState({newAnnotationReplyContent: event.target.value})\n                }}\n              />\n            </MuiThemeProvider>\n            {\n              this.state.newAnnotationReplyContent.length === 0\n              ? <FontAwesomeIcon icon={['fas', 'times-circle']} className='cancel-comment-btn' onClick={this.cancelCurrentAnnotationReply} />\n              : <FontAwesomeIcon icon={['fas', 'paper-plane']} className='commit-comment-btn' onClick={this.postAnnotationReply} />\n            }\n          </div>\n          {/* </Grid> */}\n        </Drawer>\n\n        <Drawer\n          anchor=\"bottom\"\n          open={this.state.editCommentOpen}\n          onClose={() => this.reopenAnnotationThread()}\n          variant='persistent'\n        >\n          {/* <Grid container justify=\"space-between\" alignItems=\"center\"> */}\n          <div style={{textAlign: 'center'}}>\n            <Avatar\n              alt=\"User Portrait\"\n              style={{ float: 'left', marginTop: '2%', marginLeft: '2%'}}\n              src={this.props.user.portrait_url}\n            />\n            <MuiThemeProvider theme={createMuiTheme({\n                palette: {\n                  primary: {\n                    main: '#3498db',\n                  }\n                },\n              })}\n            >\n              <TextField\n                ref={ele => this.editText = ele}\n                // className={classes.textField}\n                // defaultValue=\"Bare\"\n                placeholder=\"Type in your edit...\" margin=\"normal\" style={{width: '66vw', top: -2}}\n                multiline fullWidth value={this.state.editTextContent}\n                onChange={event => {\n                  this.setState({editTextContent: event.target.value})\n                }}\n              />\n            </MuiThemeProvider>\n            {\n              this.state.editTextContent.length === 0\n              ? <FontAwesomeIcon icon={['fas', 'times-circle']} className='cancel-comment-btn' onClick={this.cancelEdit} />\n              : <FontAwesomeIcon icon={['fas', 'paper-plane']} className='commit-comment-btn' onClick={this.postEdit} />\n            }\n          </div>\n          {/* </Grid> */}\n        </Drawer>\n\n        { this.state.mode === 'view'\n          ? <FloatButton color='rgb(27, 163, 156)' icon={<AddComment style={{ color: 'white' }} />} show={this.state.showFloatButton} clickCallback={this.changeToCommentMode} />\n          : <FloatButton color='#108ee9' icon={<DoneAll style={{ color: 'white' }} />} show={true} clickCallback={this.changeToViewMode} />}\n      </div>\n    );\n  }\n}\n\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.user,\n    coteries: state.coteries\n  };\n}\n\nexport default connect(mapStateToProps, actions)(DocumentViewer);\n","import React, { Component } from 'react';\nimport * as actions from '../actions';\nimport { connect } from 'react-redux';\nimport Navbar from './nav_bar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { WhiteSpace, List, NavBar, Icon, Toast } from 'antd-mobile';\nimport moment from 'moment';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Typography from '@material-ui/core/Typography';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Favorite from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport Avatar from '@material-ui/core/Avatar';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport EditIcon from '@material-ui/icons/Edit';\nimport TimeAgo from 'react-timeago'\n\nimport { getCookie, copyToClipboard } from '../utilities/helper';\n\nclass Readlist extends Component {\n\n  state = {\n    collected: false,\n    loading: true\n  }\n\n  componentDidMount() {\n    const { slug } = this.props.match.params;\n    const fetchData = async () => {\n      try {\n        await this.props.getReadlist(slug);\n        await this.props.getUser();\n        await this.props.getMyReadlists();\n      } catch (error) {\n        console.error(error);\n        return;\n      }\n      const collected = this.props.user.collectedReadlists.includes(this.props.readlists.readlist.slug);\n      const isOwner = this.props.user.pk == this.props.readlists.readlist.owner.pk;\n      console.log(this.props.user);\n      this.setState({\n        collected,\n        isOwner,\n        loading: false\n      });\n    };\n    fetchData();\n  }\n\n  onCollectIconClick = () => {\n    const readlist = this.props.readlists.readlist;\n    if (this.state.isOwner) {\n      Toast.fail('You are the owner of this readlist')\n      return\n    }\n    let data = new FormData();\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n    if (this.state.collected) {\n      console.log(\"uncollectin\")\n      this.props.uncollectReadlist(data, readlist.slug).then(() => {\n        this.setState({collected: false})\n        console.log(\"uncollected\")\n      });\n    } else {\n      console.log(\"collectin\")\n      this.props.collectReadlist(data, readlist.slug).then(() => {\n        this.setState({collected: true})\n        console.log(\"collected\")\n      });\n    }\n    // this.props.uncollectDocument(currDocument.uncollectUrl, data, currDocument.slug);\n  }\n\n  onShareIconClick() {\n    const url = window.location;\n    copyToClipboard(url);\n    Toast.success('Copied to clipboard!', 1);\n  }\n\n  renderDocumentList() {\n    const data = this.props.readlists.readlist.documents.map(element => {\n      return (\n        <List.Item\n          key={element.slug}\n          arrow=\"horizontal\"\n          thumb=\"https://cdn1.iconfinder.com/data/icons/file-types-23/48/PDF-128.png\"\n          multipleLine\n          onClick={() => {this.props.history.push(`/documents/${element.slug}`)}}\n        >\n          {element.title}\n          <List.Item.Brief>{moment(element.upload_time).format(\"MMMM Do YYYY, h:mm a\")}</List.Item.Brief>\n        </List.Item>\n      )\n    })\n    return (\n      <div>\n        <WhiteSpace />\n        <List>\n          {data}\n        </List>\n      </div>\n    )\n  }\n\n  renderReadlistCard() {\n    const readlist = this.props.readlists.readlist;\n    const isOwner = this.state.isOwner;\n    return (\n      <Card style={{margin: '15px 15px 5px 15px'}}>\n        <CardContent>\n          <CardHeader\n            style={{paddingTop: '0', paddingRight: '0'}}\n            action={\n              isOwner ? (\n                <IconButton>\n                  <EditIcon onClick={() => {this.props.history.push(\"/edit-readlist-form/\" + this.props.readlists.readlist.slug)}} />\n                </IconButton>\n              ) : (\n                <div></div>\n              )\n            }\n          />\n          <div style={{textAlign: 'center'}}>\n            <Typography variant=\"h5\" component=\"h5\">\n              {readlist.name}\n            </Typography>\n            <Typography variant=\"subtitle1\">\n              {readlist.description}\n            </Typography>\n            <br />\n            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center'}}>\n              <Avatar alt={readlist.owner.nickname} src={readlist.owner.portrait_url} style={{width: 28, height: 28}}/>\n              <Typography variant=\"subtitle2\" color=\"textSecondary\" style={{paddingLeft: 5}}>\n                {readlist.owner.nickname} created {<TimeAgo date={readlist.create_time} />}\n              </Typography>\n            </div>\n          </div>\n        </CardContent>\n        <CardActions>\n          <IconButton aria-label=\"Add to favorites\">\n            {this.state.collected? \n              <FavoriteIcon onClick={this.onCollectIconClick}/> : \n              <Favorite onClick={this.onCollectIconClick}/>\n            }\n          </IconButton>\n          <IconButton aria-label=\"Share\">\n            <ShareIcon onClick={this.onShareIconClick}/>\n          </IconButton>\n        </CardActions>\n      </Card>\n    )\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div>\n          <Navbar title=\"Readlists\" history={this.props.history} match={this.props.match}/>\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      )\n    }\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          history={this.props.history}\n          icon={<Icon type=\"left\" onClick={() => this.props.history.goBack()}/>}\n          style={{\n            boxShadow: '0px 1px 3px rgba(28, 28, 28, .1)',\n            zIndex: 10000000,\n            position: 'relative',\n            // borderBottom: '1px solid #c8c8c8',\n            // height: 38\n          }}\n        >\n          <span className='document-title'>\n          Readlists\n          </span>\n        </NavBar>\n        {this.renderReadlistCard()}\n        {this.renderDocumentList()}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    readlists: state.readlists,\n    user: state.user\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Readlist);\n","import _ from 'lodash';\nimport React from 'react'\nimport { NavBar, Icon, ActivityIndicator, List, WhiteSpace, Button } from 'antd-mobile';\nimport { connect } from 'react-redux';\nimport Navbar from './nav_bar';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport * as actions from '../actions';\nimport { StickyContainer } from 'react-sticky';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { getCookie } from '../utilities/helper';\n\nclass AddToReadlist extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: true,\n      currDocument: {},\n      readlists: []\n    }\n  }\n\n  componentDidMount() {\n    let groupUuid = this.props.match.params.groupUuid;\n    const fetchData = async () => {\n      try {\n        if (groupUuid) {\n        } else {\n          await this.props.getMyDocuments();\n          await this.props.getMyReadlists();\n        }\n      } catch (error) {\n        console.error(error);\n        return;\n      }\n      const currDocument = this.props.documents[window.location.href.split('/').pop()]\n      const currDocumentUuid = currDocument.uuid.replace(/-/g, '');\n      let readlists = this.props.user.createdReadlists.map(slug => {\n        let element = this.props.readlists[slug];\n          return {\n            uuid: element.uuid,\n            name: element.name,\n            count: element.documents_uuids.length,\n            checked: element.documents_uuids.includes(currDocumentUuid)\n          }\n        })\n      this.setState({currDocument: currDocument, loading: false, readlists: readlists})\n    }\n    fetchData();\n  }\n\n  handleChange = (index) => () => {\n    console.log(this.state);\n    const {readlists} = this.state;\n    readlists[index].checked = !readlists[index].checked;\n    readlists[index].checked ? readlists[index].count++ : readlists[index].count--;\n    this.setState({\n      readlists\n    });    \n  }\n\n  handleSubmit = () => {\n    const {currDocument, readlists} = this.state;\n    const addReadlists = readlists.filter((element) => {return element.checked}).map((element) => {return element.uuid});\n    const removeReadlists = readlists.filter((element) => {return !element.checked}).map((element) => {return element.uuid});\n    let data = new FormData();\n    data.append('csrfmiddlewaretoken', getCookie('csrftoken'));\n    for (let i = 0; i < addReadlists.length; i++) {\n      data.append('add_readlists[]', addReadlists[i]);\n    }\n    for (let i = 0; i < removeReadlists.length; i++) {\n      data.append('remove_readlists[]', removeReadlists[i]);\n    }\n    this.props.documentChangeReadlists(currDocument.pk, data);\n    this.props.history.goBack();\n  }\n\n  renderOwnedReadlists() {\n    if (_.isEmpty(this.state.readlists)) {\n      return (\n        <div></div>\n      )\n    }\n    const data = this.state.readlists.map((readlist, index) => {\n      return (\n        <div key={readlist.uuid}>\n          <List.Item\n            thumb={<Checkbox\n              checked={readlist.checked}\n              onChange={this.handleChange(index)}\n            />}\n            multipleLine\n          >\n            {readlist.name}\n            <List.Item.Brief>{readlist.count + \" Document(s)\"}</List.Item.Brief>\n          </List.Item>\n        </div>\n      )\n    })\n    return (\n      <div>\n        <List>\n          {data}\n          <List.Item>\n            <Button\n              type=\"primary\"\n              style={{backgroundColor: \"#1BA39C\"}}\n              onClick={() => this.handleSubmit()}\n            >OK</Button>\n          </List.Item>\n        </List>\n      </div>\n    )\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <div>\n          <Navbar title=\"Add To Readlist\" history={this.props.history} match={this.props.match}/>\n          <CircularProgress style={{color:\"#1BA39C\",  marginTop: \"38vh\"}} size='10vw' thickness={5} />\n        </div>\n      );\n    }\n\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          icon={<Icon type=\"left\" onClick={() => this.props.history.goBack()}/>}\n          style={{\n            boxShadow: '0px 1px 3px rgba(28, 28, 28, .1)',\n            zIndex: 10000000,\n            position: 'relative',\n            // borderBottom: '1px solid #c8c8c8',\n            // height: 38\n          }}\n        >\n          <span className='document-title'>\n            Add To Readlist\n          </span>\n        </NavBar>\n        <StickyContainer>\n        <WhiteSpace />\n        <div style={{ justifyContent: 'center', height: '100%'}}>\n          {this.renderOwnedReadlists(this.props.user.createdReadlists)}\n        </div>\n        </StickyContainer>\n        <WhiteSpace />\n\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    readlists: state.readlists,\n    documents: state.documents,\n    user: state.user\n  };\n}\n\nexport default connect(mapStateToProps, actions)(AddToReadlist);\n","import _ from 'lodash';\nimport React from 'react'\nimport { NavBar, Icon, ActivityIndicator, List, WhiteSpace } from 'antd-mobile';\nimport { connect } from 'react-redux';\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport * as actions from '../actions';\nimport TimeAgo from 'react-timeago'\nimport { StickyContainer } from 'react-sticky';\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loading: false,\n      searchTerm: ''\n    }\n  }\n\n  componentDidMount() {\n    this.props.getMyCoteries();\n  }\n\n  onChange = (e) => {\n    e.preventDefault();\n    const searchTerm = e.target.value;\n    const groupUuid = this.props.match.params.groupUuid;\n    this.setState({searchTerm: searchTerm})\n    if (searchTerm !== '') {\n      if (groupUuid) {\n        this.props.getCoterieSearchResults(searchTerm, groupUuid);\n        return;\n      }\n      this.props.getSearchResults(searchTerm);\n    }\n  };\n\n  renderSearchResultList(results) {\n    if (!results || this.state.searchTerm === '') {\n      return (\n        <div></div>\n      )\n    }\n    const groupUuid = this.props.match.params.groupUuid;\n    let data = [];\n    let documentsPath = `/documents/`\n    if (groupUuid) {\n      documentsPath = `/group-documents/`\n    }\n    if (results.documents) {\n      const documents = results.documents.map(element => {\n        return ({\n          sortKey: element.title,\n          jsx: (\n            <List.Item\n              key={element.slug}\n              arrow=\"horizontal\"\n              thumb=\"https://cdn1.iconfinder.com/data/icons/file-types-23/48/PDF-128.png\"\n              multipleLine\n              onClick={() => {this.props.history.push(documentsPath + `${element.slug}`)}}\n            >\n              {element.title}\n              <List.Item.Brief>\n                Uploaded by {element.uploader_name}, <TimeAgo date={element.upload_time} />\n              </List.Item.Brief>\n            </List.Item>\n          )\n        })\n      })\n      data = data.concat(documents);\n    }\n    if (results.readlists) {\n      const readlists = results.readlists.map(element => {\n        return ({\n          sortKey: element.name,\n          jsx: (\n            <List.Item\n              key={element.slug}\n              arrow=\"horizontal\"\n              thumb=\"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678072-folder-document-512.png\"\n              multipleLine\n              onClick={() => {this.props.history.push(`readlists/${element.slug}`)}}\n            >\n              {element.name}\n              <List.Item.Brief>\n                Created by {element.owner.nickname}, <TimeAgo date={element.create_time} />\n              </List.Item.Brief>\n            </List.Item>\n          )\n        })\n      })\n      data = data.concat(readlists);\n    }\n    if (results.users) {\n      const users = results.users.map(element => {\n        return ({\n          sortKey: element.nickname,\n          jsx: (\n            <List.Item\n              key={element.pk}\n              arrow=\"horizontal\"\n              thumb={element.portrait_url}\n              multipleLine\n              onClick={() => {console.log(\"user with pk \" + element.pk + \" clicked\")}}\n            >\n              {element.nickname}\n              <List.Item.Brief>\n                {element.email_address}\n              </List.Item.Brief>\n            </List.Item>\n          )\n        })\n      })\n      data = data.concat(users);\n    }\n\n    data = data\n      .sort((a, b) => ('' + a.sortKey).localeCompare(b.sortKey))\n      .map(element => element.jsx);\n\n    return (\n      <div>\n        <List>\n          {data}\n        </List>\n      </div>\n    )\n  }\n\n  render() {\n    let placeholder = \"Search globally..\"\n    let groupUuid = this.props.match.params.groupUuid;\n    if (groupUuid && this.props.coteries[this.props.match.params.groupUuid]) {\n      placeholder = \"Search within \" + this.props.coteries[this.props.match.params.groupUuid]['name'];\n    }\n    return (\n      <div>\n        <NavBar\n          mode=\"light\"\n          icon={<Icon type=\"left\" onClick={() => this.props.history.goBack()}/>}\n          style={{\n            boxShadow: '0px 1px 3px rgba(28, 28, 28, .1)',\n            zIndex: 10000000,\n            position: 'relative',\n            // borderBottom: '1px solid #c8c8c8',\n            // height: 38\n          }}\n        >\n          <span className='document-title'>\n            <Toolbar>\n              <InputBase \n                placeholder={placeholder}\n                autoFocus={true}\n                value={this.state.searchTerm || ''}\n                onChange={this.onChange}\n                fullWidth={true}\n              />\n            </Toolbar>\n          </span>\n        </NavBar>\n        <WhiteSpace />\n        <StickyContainer>\n\n        <div style={{ justifyContent: 'center', height: '100%'}}>\n          {this.renderSearchResultList(this.props.search)}\n        </div>\n        </StickyContainer>\n        <WhiteSpace />\n\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    search: state.search,\n    coteries: state.coteries\n  };\n}\n\nexport default connect(mapStateToProps, actions)(Search);\n","import 'regenerator-runtime/runtime'\n// import 'typeface-roboto'\nimport 'antd-mobile/dist/antd-mobile.css'\nimport './login.css'\n\nimport { Icon, WhiteSpace } from 'antd-mobile';\nimport {\n  faFacebook,\n  faGoogle\n} from '@fortawesome/free-brands-svg-icons'\nimport {\n  faUserPlus,\n  faUsers\n} from '@fortawesome/free-solid-svg-icons'\n\nimport Card from '@material-ui/core/Card';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Logo from '../../logo.svg'\nimport MButton from '@material-ui/core/Button';\nimport React from 'react'\nimport Snackbar from '@material-ui/core/Snackbar';\nimport TextField from '@material-ui/core/TextField';\nimport axios from 'axios'\nimport { getCookie } from '../../utilities/helper';\nimport { library } from '@fortawesome/fontawesome-svg-core'\n\n// import { MySnackbarContentWrapper } from './components/alert_message.jsx'\n\nlibrary.add(faFacebook, faGoogle, faUsers, faUserPlus)\n\n/*eslint no-undef: \"off\"*/\nclass Login extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isAuthenticated: false,\n      username: '',\n      password: '',\n      token: '',\n      errorMessage: false,\n    }\n\n    const self = this\n    this.clickLogin = function () {\n      var data = new FormData()\n      data.append('email_address', this.state.username)\n      data.append('password', this.state.password)\n      data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n      axios.post('/api/signin', data)\n        .then(function(response) {\n          if (response.status === 200) {\n            self.props.history.push('/uploads')\n          }\n        })\n        .catch(function (error) {\n          console.log(error)\n          self.setState({ errorMessage: true })\n        });\n    }\n\n    this.facebookLogin = () => {\n      FB.login(function (response) {\n        var data = new FormData()\n        data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n        data.append('auth_response', JSON.stringify(response.authResponse))\n        axios.post('/api/signin/facebook', data).then((response) => {\n          window.location.href = '/'\n        }).catch(e => {\n          // TODO: notification\n        })\n      }, { scope: 'email' })  // TODO: get user' friends also\n    }\n\n    this.handleMessageClose = (event, reason) => {\n      if (reason === 'clickaway') {\n        return\n      }\n      this.setState({ errorMessage: false })\n    }\n  }\n\n  componentDidMount() {\n    const self = this\n    function loadFBSdk(d, s, id) {\n      var js, fjs = d.getElementsByTagName(s)[0]\n      if (d.getElementById(id)) return\n      js = d.createElement(s); js.id = id\n      js.src = 'https://connect.facebook.net/en_US/sdk.js'\n      fjs.parentNode.insertBefore(js, fjs)\n    }\n    loadFBSdk(document, 'script', 'facebook-jssdk')\n    window.fbAsyncInit = function() {\n      FB.init({\n        appId: '213151942857648',  // TODO:\n        cookie: true,\n        xfbml: true,\n        version: 'v3.0'\n      })\n      FB.AppEvents.logPageView()\n      self.setState({ fbLoginButtonLoading: false })\n    }\n\n\n    var auth2 = undefined\n    function attachSignin(element) {\n      auth2.attachClickHandler(element, {},\n        function(googleUser) {\n          var data = new FormData()\n          data.append('csrfmiddlewaretoken', getCookie('csrftoken'))\n          data.append('id_token', googleUser.getAuthResponse().id_token)\n          axios.post('/api/signin/google', data).then((response) => {\n            window.location.href = '/'\n          }).catch(e => {\n            console.log(e.response)\n          })\n        }, function(error) {\n          console.log(JSON.stringify(error, undefined, 2))\n        }\n      )\n    }\n    gapi.load('auth2', function(){\n      auth2 = gapi.auth2.init({\n        client_id: '887521980338-fj0n0r7ui5cn313f4vh6paqm411upf3o.apps.googleusercontent.com',\n        cookiepolicy: 'single_host_origin',\n      })\n      attachSignin(document.getElementById('google-button'))\n    })\n  }\n\n\n  render() {\n    return (\n      <div>\n        <Card id=\"login-card\">\n          <div className=\"social\" id=\"logo-div\">\n            <img id='logo' src={Logo} />\n          </div>\n\n          <div className=\"social\">\n            <MButton\n              // onClick = {() => this.setState({ showSettleUpModal: true })}\n              variant=\"contained\" size=\"small\"\n              id=\"google-button\"\n              className=\"social-button\"\n            >\n              <FontAwesomeIcon icon={['fab', 'google']} className=\"social-icon\" />\n              <span className=\"social-text\">Log in with Google</span>\n            </MButton>\n          </div>\n\n\n          <WhiteSpace size=\"lg\" />\n          <WhiteSpace size=\"lg\" />\n\n          <div className=\"social\">\n            <MButton\n              // onClick = {() => this.setState({ showSettleUpModal: true })}\n              variant=\"contained\" color=\"primary\" size=\"small\"\n              id=\"facebook-button\"\n              className=\"social-button\"\n              onClick={this.facebookLogin}\n            >\n              <FontAwesomeIcon icon={['fab', 'facebook']} className=\"social-icon\" />\n              <span className=\"social-text\">Log in with Facebook</span>\n            </MButton>\n          </div>\n\n          <WhiteSpace size=\"lg\" />\n          <WhiteSpace size=\"lg\" />\n\n\n\n\n          <div style={{ textAlign: 'center' }}>\n            <TextField\n              className=\"input-width\"\n              label=\"Email Address\"\n              value={this.state.username}\n              onChange={(event) => {\n                this.setState({ username: event.target.value })\n              }}\n            />\n            <WhiteSpace size=\"lg\" />\n            <TextField\n              className=\"input-width\"\n              type=\"password\"\n              label=\"Password\"\n              value={this.state.password}\n              onChange={(event) => this.setState({ password: event.target.value })}\n            />\n          </div>\n\n          <WhiteSpace size=\"lg\" />\n          <WhiteSpace size=\"lg\" />\n\n          <div className=\"social\">\n            <MButton\n              onClick={(event) => this.clickLogin()}\n              variant=\"outlined\" color=\"primary\" size=\"small\"\n              className=\"social-button\"\n            >\n              <Icon type={'check-circle-o'} id=\"submit-icon\" style={{ color: '0060c0', marginRight: 8 }} />\n              <span className=\"social-text\" style={{ color: '#0060c0' }}>Log in</span>\n            </MButton>\n          </div>\n\n          <WhiteSpace size=\"lg\" />\n\n          <div className=\"social\">\n            <MButton\n              // onClick={(event) => window.location.href='/register'}\n              color=\"primary\" size=\"small\"\n              className='social-button'\n            >\n              {/*<FontAwesomeIcon icon='user-plus' id=\"submit-icon\" style={{ color: '0060c0', marginRight: 8 }} />*/}\n              <span className=\"social-text\" style={{ color: '#0060c0' }}>Create an Account <br />(Coming soon)</span>\n            </MButton>\n          </div>\n        </Card>\n      </div>\n    )\n  }\n}\n\nexport { Login }\n","import { combineReducers } from 'redux';\nimport user from './reducer_user';\nimport documents from './reducer_documents';\nimport readlists from './reducer_readlists';\nimport explore from './reducer_explore';\nimport notifications from './reducer_notifications';\nimport coteries from './reducer_coteries';\nimport search from './reducer_search';\nimport invitations from './reducer_invitations';\n\nconst rootReducer = combineReducers({\n  user,\n  documents,\n  coteries,\n  readlists,\n  explore,\n  notifications,\n  invitations,\n  search\n});\n\nexport default rootReducer;\n","import _ from 'lodash';\nimport {\n  USER_GET,\n  DOCUMENT_GET_MY,\n  DOCUMENT_UPLOAD,\n  DOCUMENT_DELETE_SUCCESS,\n  DOCUMENT_UNCOLLECT_SUCCESS,\n  READLIST_GET_MY,\n  COTERIE_GET_MY,\n  COTERIE_GET_MY_DOCUMENTS,\n  COTERIE_DOCUMENT_UPLOAD,\n  COTERIE_LEAVE,\n  COTERIE_DELETE,\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case USER_GET:\n      const user = action.payload.data;\n      return _.extend({}, state, user);\n    case DOCUMENT_GET_MY:\n      const uploadedDocuments = action.payload.data.uploadedDocuments;\n      const collectedDocuments = action.payload.data.collectedDocuments;\n      return _.extend({}, state,\n        { uploadedDocuments: _.map(uploadedDocuments, 'slug'),\n          collectedDocuments: _.map(collectedDocuments, 'slug')\n        });\n    case COTERIE_GET_MY_DOCUMENTS:\n      const coterieMyUploadedDocuments = action.payload.data;\n      return _.extend({}, state,\n        { uploadedDocuments: _.map(coterieMyUploadedDocuments, 'slug'),\n          collectedDocuments: []\n      });\n    case DOCUMENT_UPLOAD:\n    case COTERIE_DOCUMENT_UPLOAD:\n      const addedUploadedDocuments = _.concat(state.uploadedDocuments, action.payload.data.slug);\n      return _.extend({}, state, { uploadedDocuments: addedUploadedDocuments });\n    case DOCUMENT_DELETE_SUCCESS:\n      const newUploadedDocuments = _.filter(state.uploadedDocuments, (slug) => {return slug !== action.payload});\n      const newCollectedDocuments = _.filter(state.collectedDocuments, (slug) => {return slug !== action.payload});\n      return _.extend({}, state,\n        { uploadedDocuments: newUploadedDocuments,\n          collectedDocuments: newCollectedDocuments\n        });\n    case DOCUMENT_UNCOLLECT_SUCCESS:\n      const newCollected = _.filter(state.collectedDocuments, (slug) => {return slug !== action.payload});\n      return _.extend({}, state, {collectedDocuments: newCollected});\n    case COTERIE_GET_MY:\n      const joinedCoteries = action.payload.data.joinedCoteries;\n      const administratedCoteries = action.payload.data.administratedCoteries;\n      return _.extend({}, state,\n        { joinedCoteries: _.map(joinedCoteries, 'uuid'),\n          administratedCoteries: _.map(administratedCoteries, 'uuid')\n        });\n    case COTERIE_LEAVE:\n      const joinedCoteriesAfterLeave = _.filter(state.joinedCoteries, (uuid) => {return uuid !== action.uuid});\n      return _.extend({}, state, { joinedCoteries: joinedCoteriesAfterLeave});\n    case COTERIE_DELETE:\n      const administratedCoteriesAfterDelete = _.filter(state.administratedCoteries, (uuid) => {return uuid !== action.uuid});\n      return _.extend({}, state, { administratedCoteries: administratedCoteriesAfterDelete});\n    case READLIST_GET_MY:\n      const createdReadlists = action.payload.data.created_readlists;\n      const collectedReadlists = action.payload.data.collected_readlists;\n      return _.extend({}, state,\n        { createdReadlists: _.map(createdReadlists, 'slug'),\n          collectedReadlists: _.map(collectedReadlists, 'slug')\n        });\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  DOCUMENT_GET_MY,\n  DOCUMENT_UPLOAD,\n  DOCUMENT_RENAME,\n  DOCUMENT_DELETE_SUCCESS,\n  COTERIE_GET_MY_DOCUMENTS,\n  COTERIE_DOCUMENT_UPLOAD,\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case DOCUMENT_GET_MY:\n      const uploadedDocuments = action.payload.data.uploadedDocuments;\n      const collectedDocuments = action.payload.data.collectedDocuments;\n      return _.extend(\n        _.extend({}, state, _.keyBy(uploadedDocuments, 'slug')),\n        _.keyBy(collectedDocuments, 'slug'));\n\n    case COTERIE_GET_MY_DOCUMENTS:\n      const myUploadedDocuments = action.payload.data;\n      return _.extend({}, state, _.keyBy(myUploadedDocuments, 'slug'));\n\n    case DOCUMENT_UPLOAD:\n    case COTERIE_DOCUMENT_UPLOAD:\n      const uploadedDocument = action.payload.data;\n      return _.extend({}, state, {[uploadedDocument.slug]: uploadedDocument});\n\n    case DOCUMENT_RENAME:\n      const renamedDocument = action.payload.data;\n      return _.extend({}, state, {[renamedDocument.slug]: renamedDocument});\n\n    case DOCUMENT_DELETE_SUCCESS:\n      return _.omit(state, action.payload);\n\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  COTERIE_GET_MY,\n  COTERIE_CREATE,\n  COTERIE_DELETE,\n  COTERIE_UPDATE_SUCCESS,\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case COTERIE_GET_MY:\n      const joinedCoteries = action.payload.data.joinedCoteries;\n      const administratedCoteries = action.payload.data.administratedCoteries;\n      return _.extend(\n        _.extend({}, state, _.keyBy(joinedCoteries, 'uuid')),\n        _.keyBy(administratedCoteries, 'uuid'));\n    case COTERIE_CREATE:\n      const new_coterie = action.payload.data;\n      return _.extend({}, state, {[new_coterie.pk]: new_coterie});\n    case COTERIE_DELETE:\n      return _.omit(state, action.uuid);\n    case COTERIE_UPDATE_SUCCESS:\n      const updated_coterie = state[action.payload.uuid];\n      if (action.payload.name) updated_coterie.name = action.payload.name;\n      if (action.payload.description) updated_coterie.description = action.payload.description;\n      return _.extend({}, state, {[action.payload.uuid]: updated_coterie});\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  READLIST_GET_MY,\n  READLIST_GET,\n  READLIST_REMOVE_DOCUMENT_SUCCESS\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case READLIST_GET:\n      const readlist = action.payload.data;\n      return _.extend({}, state, {\n        readlist: readlist\n      });\n    case READLIST_GET_MY:\n      const createdReadlists = action.payload.data.created_readlists;\n      const collectedReadlists = action.payload.data.collected_readlists;\n      return _.extend(\n        _.extend({}, state, _.keyBy(createdReadlists, 'slug')),\n        _.keyBy(collectedReadlists, 'slug'));\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  DOCUMENT_GET_EXPLORE,\n  READLIST_GET_EXPLORE,\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case DOCUMENT_GET_EXPLORE:\n      const mostViewsDocuments = action.payload.data.filter(item => item.description === 'most_views');\n      const mostStarsDocuments = action.payload.data.filter(item => item.description === 'most_collectors');\n      const mostAnnotationsDocuments = action.payload.data.filter(item => item.description === 'most_annotations');\n      return _.extend({}, state, {\n        documents:\n        { mostViewsDocuments: mostViewsDocuments,\n          mostStarsDocuments: mostStarsDocuments,\n          mostAnnotationsDocuments: mostAnnotationsDocuments,\n        }\n      });\n    case READLIST_GET_EXPLORE:\n      const mostCollectorsReadlists = action.payload.data.most_collectors_readlists;\n      const newestReadlists = action.payload.data.newest_readlists;\n      return _.extend({}, state, {\n        readlists:\n        { mostCollectorsReadlists: mostCollectorsReadlists,\n          newestReadlists: newestReadlists,\n        }\n      });\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  NOTIFICATION_GET_COMBINED,\n  NOTIFICATION_READ\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case NOTIFICATION_GET_COMBINED:\n      const notifications = action.payload.data;\n      return _.extend({}, state, _.keyBy(notifications, 'slug'))\n    case NOTIFICATION_READ:\n      let notification_read = state[action.slug];\n      notification_read.unread = false;\n      return _.extend({}, state, {[notification_read.slug]: notification_read});\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  INVITATION_GET,\n  INVITATION_ACCEPT,\n  INVITATION_DECLINE,\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case INVITATION_GET:\n      const invitations = action.payload.data;\n      return _.extend({}, state, _.keyBy(invitations, 'pk'));\n    case INVITATION_ACCEPT:\n    case INVITATION_DECLINE:\n      return _.omit(state, action.pk);\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  SEARCHRESULT_GET,\n  SEARCH_ERROR\n} from '../actions/types';\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case SEARCHRESULT_GET:\n      const readlists = action.payload.data.resultReadlists;\n      const documents = action.payload.data.resultDocuments;\n      const users = action.payload.data.resultUsers;\n      return _.extend({}, state, {\n        readlists: readlists,\n        documents: documents,\n        users: users,\n      });\n    case SEARCH_ERROR:\n      return {};\n    default:\n      return state;\n  }\n}\n","import './index.css';\nimport 'antd-mobile/dist/antd-mobile.css';\nimport 'typeface-roboto'\n\nimport * as serviceWorker from './serviceWorker';\n\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport { applyMiddleware, compose, createStore } from 'redux';\n\nimport App from './App';\nimport CreateCoterieForm from './components/create_coterie_form';\nimport CreateReadlistForm from './components/create_readlist_form';\nimport EditReadlistForm from './components/edit_readlist_form';\nimport DocumentViewer from './components/document_viewer/document_viewer';\nimport Readlist from './components/readlist';\nimport AddToReadlist from './components/add_to_readlist';\n\nimport Search from './components/search';\n\nimport { Login } from './components/login/login'\nimport { Provider } from 'react-redux';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReduxPromise from 'redux-promise';\nimport ReduxThunk from 'redux-thunk';\n\nimport reducers from './reducers';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n    suppressDeprecationWarnings: true\n  },\n  palette: {\n    primary: {\n      main: \"#1BA39C\"\n    },\n  }\n});\n\nconst store = createStore(\n  reducers,\n  compose(\n    applyMiddleware(ReduxPromise, ReduxThunk),\n  )\n);\n\nconst renderDocumentViewer = (match, location, history) => {\n  return (\n    <DocumentViewer\n      isGroupDocument={false}\n      match={match}\n      location={location}\n      history={history}\n    />\n)\n}\n\nconst renderGroupDocumentViewer = (match, location, history) => {\n  return (\n    <DocumentViewer\n      isGroupDocument={true}\n      match={match}\n      location={location}\n      history={history}\n    />\n  )\n}\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nReactDOM.render(\n  <MuiThemeProvider theme={theme}>\n    <Provider store={store}>\n        <BrowserRouter>\n          <Switch>\n            <Route path=\"/documents/:slug\" render={({match, location, history}) => renderDocumentViewer(match, location, history)} />\n            <Route path=\"/coteries/:coterieId/documents/:slug\" render={({match, location, history}) => renderGroupDocumentViewer(match, location, history)} />\n            <Route path='/readlists/:slug' component={Readlist}/>\n            <Route path=\"/search/:groupUuid\" component={Search} />\n            <Route path=\"/search\" component={Search} />\n            <Route path=\"/add-to-readlists\" component={AddToReadlist} />\n            <Route path=\"/create-coterie-form\" component={CreateCoterieForm} />\n            <Route path=\"/create-readlist-form\" component={CreateReadlistForm} />\n            <Route path=\"/edit-readlist-form/:slug\" component={EditReadlistForm} />\n            <Route path=\"/sign-in\" component={Login} />\n            <Route exact path=\"/\"render={() => <Redirect to=\"/uploads\" />} />\n            <Route path=\"/\" component={App} />\n          </Switch>\n        </BrowserRouter>\n    </Provider>\n  </MuiThemeProvider>\n  , document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}